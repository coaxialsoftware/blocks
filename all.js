//# sourceMappingURL=all.js.map
(function(c,a){function b(a){c.addEventListener("load",function(){new b.pc(a)})}c.t=b;b.extend=function(a,b){for(var f in b)a[f]=b[f]};b.extend(b,{i:function(a){this.extend(a)},ia:function(a){return function(b){return new a(b)}},id:function(b){return a.getElementById(b)},ready:function(a){c.addEventListener("load",a,!1)},v:function(b){return a.createElement(b)}});b.v.src=function(b,c){var f=a.createElement(b);f.setAttribute("src",c);return f};b.v.K=function(a){return b.v.src("img",a)};b.i.extend=
function(a,c){function f(){}var g,k=this,n=a.c||function(){k.apply(this,arguments)},r;f.prototype=k.prototype;n.prototype=new f;n.extend=b.i.extend;for(g in a)a.hasOwnProperty(g)&&(r=Object.getOwnPropertyDescriptor(a,g),Object.defineProperty(n.prototype,g,r));for(g in c)c.hasOwnProperty(g)&&(r=Object.getOwnPropertyDescriptor(c,g),Object.defineProperty(n,g,r));return n};b.i.prototype.extend=function(a){for(var b in a)this[b]=a[b]}})(this,this.document);
(function(c,a,b){var e=a.v("CANVAS"),d=a.ia;a.extend(a,{Te:function(a){return Math.random()*a},$c:function(a){return Math.random()*a|0},Uf:function(a,b,c){var e=[],d;if(b)for(;b--;)for(e[b]=[],d=0;d<a;d++)e[b][d]=c;else for(;a--;)e.push(c);return e},canvas:function(f,b){var c=a.v("CANVAS");c.setAttribute("width",f);c.setAttribute("height",b);return c},ja:function(f){var b=typeof f;if("object"===b){if(null===f)return"null";if(f instanceof Array)return"array";if(f instanceof a.i)return"j5g3";if(f instanceof
c.HTMLElement||f instanceof c.Image)return"dom";if(f instanceof c.HTMLAudioElement)return"audio"}return b},Ua:function(a,b,c,d){return e.getContext("2d").createLinearGradient(a,b,c,d)},mg:function(a,g,c,e){e===b&&(e=1);return"rgba("+a+","+g+","+c+","+e+")"},cg:function(a,g,c,e){e===b&&(e=1);return"hsla("+a+","+g+"%,"+c+"%,"+e+")"}});a.oa={qb:function(){},ud:function(a){this.W(a);this.u(a);this.end(a)},Kf:function(a){this.u(a)},Fd:function(){var a=this.Sa;a.clearRect(0,0,this.width,this.height);this.W(a);
this.u(a);this.end(a);this.screen.clearRect(0,0,this.width,this.height);this.screen.drawImage(this.Da,0,0)},Gd:function(){var a=this.Sa,b=this.B,c=this.N,e=this.C,d=this.M;0!==c&&0!==d&&(a.clearRect(b,e,c,d),this.W(a),this.u(a),this.end(a),this.screen.clearRect(b,e,c,d),this.screen.drawImage(this.Da,b,e,c,d,b,e,c,d),this.B=this.C=null,this.M=this.N=0)},Of:function(){var a=this.Sa;this.clearRect(0,0,this.canvas.width,this.canvas.height);this.W(a);this.u(a);this.end(a)},zf:function(a){a.drawImage(this.source,
this.x+this.b,this.y+this.a)},lb:function(a){a.drawImage(this.Nd,0,0,this.width,this.height,this.x+this.b,this.y+this.a,this.width,this.height)}};a.T={Image:function(a){a.drawImage(this.source,this.b,this.a)},Bf:function(a){a.drawImage(this.source,this.b,this.a,this.width,this.height)},ob:function(a){var b=this.source;a.drawImage(b.K,b.x,b.y,b.rd,b.Yc,this.b,this.a,this.width,this.height)},Ka:function(a){var b=this.frame,c=b;for(a.translate(this.b,this.a);(c=c.D)!==b;)c.w(a)},Text:function(a){a.fillText(this.text,
this.b,this.a)},Ed:function(a){for(var b=this.text.split("\n"),c=0,e=b.length,d=0;c<e;c++)a.fillText(b[c],this.b,this.a+d),d+=this.za},Rf:function(a){a.strokeText(this.text,this.b,this.a)},tc:function(a){a.fillText(this.text,this.b,this.a);a.strokeText(this.text,this.b,this.a)},pa:function(a){var b=this.map,c=b.length,e,d=this.na,l,p;for(a.translate(this.b,this.a+c*this.Ga);c--;)for(e=b[c].length,p=b[c],a.translate(e*this.ba,-this.Ga);e--;)a.translate(-this.ba,0),(l=d[p[e]])&&l.w(a)},Cf:function(a){var b=
this.map,c=0,e,d=b.length,l=this.na,p;e=(this.ba/2|0)+this.offsetX;var q=(this.Ga/2|0)+this.offsetY,u,v;a.translate(this.b,this.a-q);for(u=e;c<d;c++)for(e=b[c].length,p=b[c],u=-u,a.translate(e*this.ba-u,q);e--;)a.translate(-this.ba,0),(v=l[p[e]])&&v.w(a)}};a.lb={td:function(f,b){var c=a.v("CANVAS"),e;c.width=f||this.width;c.height=b||this.height;e=c.getContext("2d");e.translate(-this.x-this.b,-this.y-this.a);this.Qc();this.w(e);this.Nd=c;this.Ec=this.w;this.w=a.oa.lb;return this},lf:function(a,
b){return a(b,e.getContext("2d"))}};a.La={qb:function(){return!1},Ja:function(a,b,c){c=c?c.product(this.j,this.x,this.y):this.j.Db(this.x,this.y);c.ic(a,b);return c.x*c.x+c.y*c.y<=this.d*this.d?this:!1},Ka:function(a,b,c){var e=this.frame,d=e,l;for(c=c?c.product(this.j,this.x,this.y):this.j.Db(this.x,this.y);(d=d.I)!==e&&!(l=d.Qa(a,b,c)););return l},Rect:function(a,b,c){c=c?c.product(this.j,this.x,this.y):this.j.Db(this.x,this.y);c.ic(a,b);return 0<c.x&&c.x<this.width&&0<c.y&&c.y<this.height?this:
!1},nb:function(a,b,c){var e=this.aa,d=this.ac,l=0,p=e.length;c=c?c.product(this.j,this.x,this.y):this.j.Db(this.x,this.y);for(c.ic(a,b);l<p;l+=2)if(a=d[l]*(c.x-e[l])+d[l+1]*(c.y-e[l+1]),0<a)return!1;return this}};a.Dd=a.i.extend({k:1,l:0,m:0,n:1,Gb:1,Mb:0,ma:1,Za:1,c:function(a,c,e,d){a!==b&&(this.k=a,this.l=c,this.m=e,this.n=d)},Ze:function(a){this.Gb=Math.cos(a);this.Mb=Math.sin(a);return this.tb()},$e:function(a){this.ma=a;return this.tb()},af:function(a){this.Za=a;return this.tb()},scale:function(a,
b){this.ma=a;this.Za=b;return this.tb()},tb:function(){this.k=this.ma*this.Gb;this.l=this.ma*this.Mb;this.m=-this.Za*this.Mb;this.n=this.Za*this.Gb;return this},Db:function(f,b){return new a.qc(this.k,this.l,this.m,this.n,f||0,b||0)}});a.qc=a.i.extend({k:1,l:0,m:0,n:1,s:0,q:0,c:function(a,c,e,d,r,l){a!==b&&(this.k=a,this.l=c,this.m=e,this.n=d,this.s=r,this.q=l)},translate:function(a,b){this.s+=a;this.q+=b},multiply:function(a,b,c,e,d,l){var p=this.k,q=this.l,u=this.m,v=this.n;this.k=p*a+u*b;this.l=
q*a+v*b;this.m=p*c+u*e;this.n=q*c+v*e;this.s+=p*d+u*l;this.q+=q*d+v*l;return this},clone:function(){return a.Ge().multiply(this.k,this.l,this.m,this.n,this.s,this.q)},inverse:function(){var a=this.clone(),b=this.k*this.n-this.l*this.m;a.k=this.n/b;a.l=this.l/-b;a.m=this.m/-b;a.n=this.k/b;a.s=(this.n*this.s-this.m*this.q)/-b;a.q=(this.l*this.s-this.k*this.q)/b;return a},product:function(a,b,c){return this.clone().multiply(a.k,a.l,a.m,a.n,a.s||b||0,a.q||c||0)},reset:function(){this.k=1;this.m=this.l=
0;this.n=1;this.q=this.s=0;return this},xg:function(a,b){this.x=this.k*a+this.m*b+this.s;this.y=this.l*a+this.n*b+this.q;return this},ic:function(a,b){var c=this.k*this.n-this.l*this.m;this.x=(this.n*a-this.m*b+this.m*this.q-this.n*this.s)/c;this.y=(-this.l*a+this.k*b+this.l*this.s-this.k*this.q)/c;return this}});a.h=a.i.extend({source:null,D:null,I:null,parent:null,j:null,x:0,y:0,b:0,a:0,width:null,height:null,Ic:0,set rotation(a){this.j.Ze(this.Ic=a)},get rotation(){return this.Ic},set R(a){this.j.$e(a)},
get R(){return this.j.ma},set S(a){this.j.af(a)},get S(){return this.j.Za},alpha:1,Mc:null,stroke:null,fill:null,font:null,Wa:null,Wb:null,Xb:null,dd:null,Yf:!0,c:function(b){this.j=new a.Dd;this.extend(b)},W:function(a){var b=this.j;a.save();1!==this.alpha&&(a.globalAlpha*=this.alpha);null!==this.fill&&(a.fillStyle=this.fill);null!==this.stroke&&(a.strokeStyle=this.stroke);null!==this.font&&(a.font=this.font);null!==this.Mc&&(a.globalCompositeOperation=this.Mc);null!==this.Wa&&(a.lineWidth=this.Wa);
null!==this.Wb&&(a.lineCap=this.Wb);null!==this.Xb&&(a.lineJoin=this.Xb);null!==this.dd&&(a.miterLimit=this.dd);a.transform(b.k,b.l,b.m,b.n,this.x,this.y)},end:function(a){a.restore()},w:a.oa.ud,Ib:null,Q:function(){this.parent.Q(this)},update:null,remove:function(){this.parent&&(this.I.D=this.D,this.D.I=this.I,this.parent=this.I=null);return this},align:function(a,b){b=b||this.parent;switch(a){case "center":this.x=b.width/2;break;case "left":this.x=0;break;case "right":this.x=b.width-this.width;
break;case "middle":this.y=b.height/2;break;case "center middle":this.A(b.width/2,b.height/2);break;case "origin":this.A(-this.width/2,-this.height/2);break;case "origin top":this.A(-this.width/2,-this.height);break;case "origin bottom":this.A(-this.width/2,0)}return this},A:function(a,b){this.x=a;this.y=b;return this},size:function(a,b){this.width=a;this.height=b;return this},move:function(a,b){this.x+=a;this.y+=b;return this},visible:function(){return 0<this.alpha},stretch:function(a,b){return this.scale(a/
this.width,b/this.height)},vg:function(){return a.clip({width:this.width,height:this.height}).add(this)},Oc:a.lb.td,Qc:function(){this.Ec&&(this.w=this.Ec)},set:function(a){this.extend(a);return this},Qa:a.La.Rect,scale:function(a,b){c.isNaN(a)||(this.R=a);c.isNaN(b)||(this.S=b);return this},rotate:function(a){this.rotation+=a;return this}});a.Image=a.h.extend({c:function(b){switch(a.ja(b)){case "string":b={source:a.id(b)};break;case "dom":b={source:b}}a.h.call(this,b);this.source&&this.df(this.source)},
u:a.T.Image,Vd:function(b){return"string"===typeof b?a.id(b):b},df:function(a){this.source=this.Vd(a);null===this.width&&(this.width=this.source.naturalWidth||this.source.width);null===this.height&&(this.height=this.source.naturalHeight||this.source.height)}});a.Text=a.h.extend({text:"",za:null,Sf:null,Kc:function(a){var b=this.cd();"left"===a?this.b=0:"center"===a?this.b=-b/2:"right"===a&&(this.b=-b);return this},c:function(b){"string"===typeof b&&(b={text:b});a.h.call(this,b);null===this.za&&this.cd()},
Ib:a.T.Text,u:a.T.Text,de:function(b,c){var e=(""+b.text).split("\n"),d,r=e.length,l=0;a:{d=b;do{if(null!==d.font){d=d.font;break a}if(d instanceof a.pb)break}while(d=d.parent);d=void 0}b.W(c);d&&(c.font=d);for(;r--;)d=c.measureText(e[r]),d.width>l&&(l=d.width);null===b.za&&(b.za=parseInt(c.font,10));b.end(c);return l},Fb:a.h.prototype.W,W:function(a){a.textBaseline="top";this.Fb(a)},cd:function(){return a.lb.lf(this.de,this)}});a.yd=a.h.extend({Zc:"",c:function(b){"string"===typeof b&&(b={Zc:a.v(b).innerHTML});
a.h.apply(this,[b])}});a.o=a.h.extend({V:null,sa:0,length:null,Cb:!0,gf:1,c:function(b){a.h.call(this,b);this.V=[];this.Pb();null!==this.ea&&this.ea()},Q:function(a){this.parent.Q(a||this)},ea:null,update:function(){var a=this.frame,b=a;for(this.kc&&this.kc();(b=b.D)!==a;)null!==b.update&&b.update();this.Cb&&((this.sa+=this.gf)>=this.length&&(this.sa=0),this.frame=this.V[this.sa|0])},frame:null,u:a.T.Ka,stop:function(){this.Cb=!1;return this},play:function(){this.Cb=!0;return this},add:function(b){switch(a.ja(b)){case "function":b=
new a.mc(b);break;case "string":b=new a.Image({source:b});break;case "array":for(var c=0;c<b.length;c++)this.add(b[c]);return this;case "dom":case "object":b=new a.Image(b);break;case "undefined":case "null":throw"Trying to add undefined object to clip.";}return this.Jc(b)},Jc:function(a){var b=this.frame;a.parent&&a.remove();b.I.D=a;a.I=b.I;a.D=b;a.parent=this;b.I=a;return this},Pb:function(a){var b={};b.I=b.D=b;this.V.push(b);this.go((this.length=this.V.length)-1);return a?this.add(a):this},eg:function(){return this.frame.D===
this.frame},kd:function(a){a=a===b?this.sa:a;this.V.splice(a,1);this.go(0<a?a-1:0);this.length=this.V.length;return this},go:function(a){this.frame=this.V[this.sa=a];return this},ub:function(a){for(var b=this.V.length,c,e;b--;)for(e=c=this.V[b];(e=e.D)!==c;)a(e);return this},$f:function(a){for(var b=this.frame,c=b,e;(c=e=c.D)!==b;)for(;(e=e.D)!==b;)a(c,e)},Tf:function(a){return this.ub(function(b){b.align&&b.align(a)})},Qa:a.La.Ka});a.pb=a.o.extend({canvas:null,Sa:null,screen:null,Da:null,pg:!1,background:!1,
F:!1,B:0,C:0,N:0,M:0,Yd:function(){if(!1===this.F)return this.F=c.document.body;if("dom"===a.ja(this.F))return this.F;var b=this.F=a.v("DIV");b.className="j5g3-stage";c.document.body.appendChild(b);return b},Xd:function(){var b=this.Yd();this.canvas||(this.canvas=a.canvas(this.width,this.height),this.background?b.insertBefore(this.canvas,b.firstChild):b.appendChild(this.canvas));this.Da=a.v("CANVAS")},Zd:function(){this.Sa=this.Da.getContext("2d");this.screen=this.canvas.getContext("2d")},c:function(b){a.o.call(this,
b);this.Xd();this.Xe(this.width||this.canvas.clientWidth||640,this.height||this.canvas.clientHeight||480);this.Zd()},De:function(b){var c;"string"===typeof b&&(b={canvas:a.id(b)});a.extend(c={width:this.width,height:this.height,F:this.F},b);b=new a.pb(c);b.w=a.oa.Gd;this.add(b);return b},Q:function(a){if(a===b)this.B=this.C=0,this.M=this.height,this.N=this.width;else{var c=a.x+a.b,e=a.y+a.a;null===this.B?this.B=c:c<this.B&&(this.N+=this.B-c,this.B=c);null===this.C&&(this.C=e);e<this.C&&(this.M+=this.C-
e,this.C=e);c+a.width>this.B+this.N&&(this.N=c+a.width-this.B,this.B+this.N>this.width&&(this.N=this.width-this.B));e+a.height>this.C+this.M&&(this.M=e+a.height-this.C,this.C+this.M>this.height&&(this.M=this.height-this.C))}},Xe:function(a,b){if(0===a||0===b)throw Error("Invalid stage resolution: "+a+"x"+b);this.N=this.canvas.width=this.Da.width=a;this.M=this.canvas.height=this.Da.height=b;return this.size(a,b)},w:a.oa.Fd});a.Ma=a.h.extend({ga:!1,repeat:Infinity,duration:100,ca:null,target:null,G:null,
fb:0,fd:null,$:null,c:function(b){b instanceof a.i&&(b={target:b});this.update=this.start;a.h.apply(this,[b])},w:a.oa.qb,pause:function(){this.Fc=this.update;this.update=null;return this},Ye:function(){this.update=this.Fc?this.Fc:this.start;return this},ld:function(){this.repeat-=1;this.jb=this.fb=0;return this},lg:function(){this.fb=0;return this.stop().start()},stop:function(){this.pause().ld();this.fd&&this.fd();return this},qe:function(a){return a},Lc:function(a,b){return this.ca[a]+this.qe(b)*
(this.G[a]-this.ca[a])},Kb:a.h.prototype.remove,remove:function(){this.$&&this.$();this.Kb()},Od:function(){var a=this.target,b;this.duration===this.fb&&(this.jb=1);for(b in this.G)a[b]=this.Lc(b,this.jb);this.fb<this.duration?(this.fb++,this.jb+=this.mf):this.ga?this.remove():this.repeat?this.ld():this.stop()},start:function(){var a=this.G,b,c=this.target;if(null===this.ca)for(b in this.ca={},a)this.ca[b]=c[b];this.mf=1/this.duration;this.jb=0;this.update=this.Od;return this},Qa:a.La.qb});a.ob=a.h.extend({c:function(b){a.h.call(this,
b);if(!this.source)throw Error("Invalid source property for Sprite");null===this.width&&(this.width=this.source.rd);null===this.height&&(this.height=this.source.Yc)},u:a.T.ob});a.Hd=a.i.extend({width:null,height:null,rb:null,c:function(b){switch(a.ja(b)){case "string":case "dom":case "j5g3":b={source:b}}a.i.call(this,b)},set source(b){switch(a.ja(b)){case "string":case "dom":b=new a.Image(b);break}if(!b)throw Error("Invalid source for Spritesheet.");null===this.width&&b&&(this.width=b.width);null===
this.height&&b&&(this.height=b.height);this.ge=b;this.rb=[]},get source(){return this.ge},select:function(a){var b=[];this.ub(a,function(a){b.push(a)});return b},ub:function(a,b){for(var c=0,e=a.length;c<e;c++)b(this.bb(a[c]));return this},clip:function(b){var c=a.clip().kd(),e=0,d=0;this.ub(b,function(a){c.Pb(a);a.width>e&&(e=a.width);a.height>d&&(d=a.height)});return c.size(e,d).go(0)},push:function(a,b,c,e){this.slice(a,b,c,e);return this},slice:function(a,b,c,e){return this.rb.push({width:c,height:e,
source:{K:this.source.source,x:a,y:b,rd:c,Yc:e}})-1},Wf:function(a,b,c,e){return this.bb(this.slice(a,b,c,e))},ye:function(a,b,c){c=c||0;var e=2*c,d=this.width/a-e|0,l=this.height/b-e|0,p,q;for(p=0;p<b;p++)for(q=0;q<a;q++)this.slice(q*(d+e)+c,p*(l+e)+c,d,l);return this},bb:function(b){return new a.ob(this.rb[b])},na:function(){for(var a=0,b=this.rb.length,c=[];a<b;a++)c.push(this.bb(a));return c},map:function(b,c){return new a.pa({na:this.na(),ba:b,Ga:c})}});a.xd=a.o.extend({c:function(b){a.o.apply(this,
[b])},source:a.o,oe:function(){this.ce--?null!==this.zc&&this.zc():this.remove()},Ee:10,ed:null,count:1,ff:function(){var a=new this.source;a.ce=this.Ee;a.zc=a.update;a.update=this.oe;return a},Qd:function(){var a=this.ff();this.Jc(a);this.ed&&this.ed(a)},kc:function(){for(var a=this.count;a--;)this.Qd()}});a.pa=a.h.extend({na:null,map:null,ba:0,Ga:0,offsetX:0,offsetY:0,c:function(b){a.h.apply(this,[b]);null===this.map&&(this.map=[])},wg:function(a,b){var c=(this.ba/2|0)+this.offsetX;return{x:(a*
this.ba-(b%2?0:-c)|0)-this.b,y:(b*((this.Ga/2|0)+this.offsetY)|0)-this.a}},u:a.T.pa});a.mc=a.i.extend({Wd:a.i,update:null,w:a.oa.qb,c:function(b){"function"===a.ja(b)&&(b={update:b});this.Wd(b)},remove:a.h.prototype.remove},{rotate:function(a){return function(){a.rotation=6.1>a.rotation?a.rotation+.1:0}}});a.pc=a.i.extend({version:"0.9.0",Eb:31,Lb:null,Ac:null,Hc:0,Bc:0,paused:!0,nd:function(){var a=this;a.Rc();a.Lb=function(){a.Gc()};a.Gc();a.Ac=function(){a.Sd()};a.Bc=c.setInterval(a.Ac,a.Eb);a.paused=
!1;return a},Rc:function(){c.clearInterval(this.Bc);c.cancelAnimationFrame(this.Hc)},xa:function(){this.pause();this.Ke&&this.Ke()},Gc:function(){this.f.w();this.Hc=c.requestAnimationFrame(this.Lb)},Sd:function(){this.f.update()},hc:function(){},c:function(d){"function"===typeof d&&(d={hc:d});d===b&&(d={});e.style.display="none";e.setAttribute("id","j5g3-cache");c.document.body.appendChild(e);a.i.apply(this,[d]);this.cb||(this.cb={});this.cb.canvas||(this.cb.canvas=a.id("screen"));this.f||(this.f=
new a.pb(this.cb));this.hc(a,this)},pause:function(){this.Rc();this.Lb=function(){};this.paused=!0},Ye:function(){this.paused&&this.nd()},set ve(a){this.Eb=1E3/a},get ve(){return 1E3/this.Eb},dg:function(b,c){var d,n;switch(a.ja(b)){case "string":d=a.id(b);break;case "dom":d=b;break;case "j5g3":d=b.source}return d?(e.width=d.width,e.height=d.height,n=e.getContext("2d"),n.drawImage(d,0,0),n.getImageData(0,0,d.width,d.height)):this.f.Sa.createImageData(b||this.f.canvas.width,c||this.f.canvas.height)}});
a.xf=function(){function a(b,c){e["EaseIn"+b]=c;e["EaseOut"+b]=function(a){return 1-c(1-a)};e["EaseInOut"+b]=function(a){return.5>a?c(2*a)/2:c(-2*a+2)/-2+1}}var b={},c,e={};["Quad","Cubic","Quart","Quint","Expo"].forEach(function(a,c){b[a]=function(a){return Math.pow(a,c+2)}});b.Pf=function(a){return 1-Math.cos(a*Math.PI/2)};b.vf=function(a){return 1-Math.sqrt(1-a*a)};b.yf=function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)};b.qf=function(a){return a*a*(3*a-
2)};b.tf=function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)};for(c in b)a(c,b[c]);e.Ff=function(a){return a};e.Qf=function(a){return-Math.cos(a*Math.PI)/2+.5};return e}();a.action=d(a.mc);a.clip=d(a.o);a.K=d(a.Image);a.bb=d(a.ob);a.Fa=d(a.Hd);a.text=d(a.Text);a.f=d(a.pb);a.Ie=function(){var b=new a.Text("Drag Left/Right/Down to move.\n\nDrag Up to Rotate.\n\nFlick Down to Hard Drop.");b.u=a.T.Ed;return b};a.og=function(b){b=new a.Text(b);
b.u=a.T.tc;return b};a.Ge=function(){return new a.qc(void 0,void 0,void 0,void 0,void 0,void 0)};a.H=d(a.Ma);a.ag=d(a.xd);a.map=d(a.pa);a.Zc=d(a.yd);a.re=d(a.pc)})(this,this.t);
(function(c,a){a.Bd=a.i.extend({wd:{IMG:"load",AUDIO:"canplaythrough",SCRIPT:"load"},fa:null,pe:250,hd:0,start:null,length:0,Ya:null,Ab:null,ec:null,c:function(b){a.i.apply(this,[b]);this.fa={};this.start=new Date},wc:function(){var a,e=0,d=0,f=this;for(a in this.fa)d++,this.fa.hasOwnProperty(a)&&this.fa[a].ready&&e++;this.hd=e?e/d:0;this.Ya&&this.Ya(this.hd);d===e?this.ec&&this.ec():this.he=c.setTimeout(function(){f.wc()},this.pe)},X:function(b,e){var d=this,f=this.fa[e],g;f?f=f.X:(f=a.v(b),this.fa[e]=
g={X:f},f.addEventListener(this.wd[b],function(){g.ready=!0;d.Ab&&d.Ab(g)},!1),f.addEventListener("error",function(){g.ready=!0;c.console.warn("Could not load asset: "+e)},!1),f.setAttribute("src",e),this.length++);return f},ya:function(a){return this.X("IMG",a)},audio:function(b){var c=b.split(".").pop();a.eb.audio[c]||(b=b.replace(new RegExp("\\."+c+"$"),"."+a.eb.audio.Se));return this.X("AUDIO",b)},data:function(a,e){var d=this,f=new c.XMLHttpRequest,g=this.fa[a];g||(g=this.fa[a]={source:a,kg:f},
f.onreadystatechange=function(){4===f.readyState&&(g.ready=!0,g.Ue=f.responseText,e&&e(g),d.Ab&&d.Ab(f))},f.open("GET",a),f.send());return g},Ce:function(a){return this.data(a,function(a){a.Ce=JSON.parse(a.Ue)})},ng:function(a){a=this.X("SCRIPT",a);c.document.head.appendChild(a);return a},ready:function(a){a&&(this.ec=a);this.wc()},xa:function(){c.clearTimeout(this.he)}});a.Aa=a.ia(a.Bd)})(this,this.t);
(function(c){c.mb=c.i.extend({sd:null,nc:null,bc:0,cc:0,fc:0,length:0,gb:0,hb:0,0:null,1:null,2:null,3:null,4:null,5:null,6:null,jd:null});c.mb.Ja=c.mb.extend({jd:function(a,b){var c=a.d+b.d,d=a.x+a.d+a.b,f=a.y+a.d+a.a,g=d-b.d-b.b-b.x,k=f-b.d-b.a-b.y,n=g*g+k*k;if(this.wa=c*c>n)return n=Math.sqrt(n),this.sd=a,this.nc=b,this.bc=g/n,this.cc=k/n,this.fc=c-n,this[0]=d-g/2,this[1]=f-k/2,!0}});c.mb.lc=c.mb.extend({jd:function(a,b){var c=a.x+a.b,d=b.x+b.b,f=a.y+a.a,g=b.y+b.a,k=c+a.width,n=d+b.width,r=f+a.height,
l=g+b.height,p,q;if(this.wa=!(d>=k||n<=c||g>=r||l<=f))return this.nc=b,p=this.gb=n/2-k/2,q=this.hb=l/2-r/2,this[0]=Math.max(c,d),this[1]=Math.max(f,g),this[2]=Math.min(k,n),this[3]=Math.min(r,l),this[2]-this[0]<this[3]-this[1]?(this.bc=0>p?-1:1,this.cc=0,this.fc=0>p?this[2]-c:k-this[0]):(this.cc=0>q?-1:1,this.bc=0,this.fc=0>q?this[3]-f:r-this[1]),this}});c.oc={Ja:function(a){var b=this.d+a.d,c=this.x+this.d+this.b-a.d-a.b-a.x;a=this.y+this.d+this.a-a.d-a.a-a.y;return b*b>c*c+a*a},lc:function(a){var b=
this.y+this.height,c=a.x+a.width,d=a.y+a.height;return!(a.x>this.x+this.width||c<this.x||a.y>b||d<this.y)},Ka:function(a){var b=this.frame,c=b,d=!1;for(a={x:a.x-this.x,y:a.y-this.y,width:a.width,height:a.height};(c=c.I)!==b&&!(d=c.wa&&c.wa(a)););return d}};c.h.prototype.wa=c.oc.lc;c.o.prototype.wa=c.oc.Ka})(this.t);
(function(c,a){c.U=c.h.extend({shape:null,red:a,green:a,blue:a,Sc:"fill",Jb:a,Cc:a,vc:a,Wa:null,c:function(a){c.h.apply(this,[a])},Fb:c.h.prototype.W,W:function(a){if(this.red!==this.Jb||this.blue!==this.vc||this.green!==this.Cc)this[this.Sc]="rgb("+Math.floor(this.red)+","+Math.floor(this.green)+","+Math.floor(this.blue)+")",this.Jb=this.Jb,this.Cc=this.green,this.vc=this.blue;this.Fb(a)},Bb:function(){},u:function(a){a.beginPath();this.Bb(a);a.closePath();a.fill();a.stroke()}});c.Ja=c.U.extend({shape:"circle",
d:0,c:function(a){"number"===typeof a&&(a={d:a});c.U.apply(this,[a])},Bb:function(a){a.arc(this.d+this.b,this.d+this.a,this.d,0,2*Math.PI,!1)},Qa:c.La.Ja});c.zd=c.U.extend({nf:0,of:0,Bb:function(a){a.moveTo(this.b,this.a);a.lineTo(this.nf,this.of)}});c.nb=c.U.extend({shape:"polygon",aa:null,ac:null,c:function(a){c.U.apply(this,[a]);null===this.aa&&(this.aa=[]);null===this.ac&&this.ne()},normalize:function(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]);a[0]/=c;a[1]/=c;return a},ne:function(){for(var a=0,
c,d=this.aa,f=d.length,g=[],k=[0,0];a<f;a+=2)c=a+2<f?a+2:0,k[0]=d[c]-d[a],k[1]=d[c+1]-d[a+1],this.normalize(k),g.push(k[1],-k[0]);this.ac=g},Bb:function(a){var c=2,d=this.aa,f=d.length;for(a.moveTo(d[0],d[1]);c<f;c+=2)a.lineTo(d[c],d[c+1])},Qa:c.La.nb},{create:function(a,e){var d=2*Math.PI/a,f=d;for(e.aa=[];a--;)e.aa.push(Math.cos(f)*e.d,Math.sin(f)*e.d),f+=d;return new c.nb(e)}});c.Rect=c.U.extend({shape:"polygon",c:function(a){c.U.apply(this,[a]);null===this.width&&(this.height=this.width=2*this.d)},
u:function(a){a.fillRect(this.b,this.a,this.width,this.height);a.strokeRect(this.b,this.a,this.width,this.height)}});c.vd=c.U.extend({shape:"circle",Wb:"round",Xb:"round",Sc:"stroke",c:function(a){"number"===typeof a&&(a={Wa:a});c.U.apply(this,[a])},u:function(a){a.strokeRect(0,0,1,1)}});c.jg=c.ia(c.nb);c.Vf=c.ia(c.Ja);c.hg=c.ia(c.zd);c.Zf=c.ia(c.vd);c.rect=c.ia(c.Rect)})(this.t);
(function(c,a){var b=a.v("audio"),e=["wav","mp3","ogg"],d=["audio/wav","audio/mpeg","audio/ogg"];Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;return function(){return b.apply(a,arguments)}});c.HTMLAudioElement||(c.HTMLAudioElement=c.pf);c.requestAnimationFrame||(c.requestAnimationFrame=c.mozRequestAnimationFrame||c.msRequestAnimationFrame||function(a){return c.setTimeout(a,1E3/60)});c.cancelAnimationFrame||(c.cancelAnimationFrame=c.mozCancelAnimationFrame||c.msCancelAnimationFrame||
function(a){c.clearTimeout(a)});a.eb={audio:{},jc:"ontouchstart"in c.document};b&&b.canPlayType&&e.forEach(function(c,e){a.eb.audio[c]=b.canPlayType(d[e]);a.eb.audio[c]&&(a.eb.audio.Se=c)})})(this,this.t);(function(c,a){c.r=function(a){return new c.r.Ad(a)};c.extend(c.r,{ra:{},Ad:c.i.extend({x:0,y:0,Uc:0,Vc:0,R:1,S:1,L:null,element:null,interval:60,ze:null,ka:null,xb:!1,disabled:!1,c:function(b){var e=this;if("string"===typeof b||"object"===typeof b&&b.tagName)b={element:b};c.i.call(this,b);null===this.element?this.element=a.document:"string"===typeof this.element&&(this.element=c.id(this.element));e.L={};e.ka={};e.gd=function(){e.fe()};e.Ra=function(a){e.Pd(a)};a.addEventListener("resize",this.Ra);
a.addEventListener("scroll",this.Ra);this.ze=a.setInterval(this.gd,this.interval);this.Ra();for(var d in c.r.ra)e.L[d]=new c.r.ra[d](e)},kf:function(b){var c=this;c.disabled=!0;a.setTimeout(function(){c.disabled=!1},b)},zb:function(a,c){if("object"===typeof a)for(var d in a)this.zb(d,a[d]);else{if(!c)throw Error("callback parameter is required.");var f=this.ka[a];this.ka[a]=f?function(a){f(a);c(a)}:c}return this},J:function(a,c){if(!this.disabled&&(c.fg=this,c.name=a,(!this.Le||!1!==this.Le(c))&&
this.ka&&this.ka[a]))return c.preventDefault(),this.ka[a](c)},Pd:function(){var b=this.element,c;b.getBoundingClientRect?(c=b.getBoundingClientRect(),this.Qb=a.scrollX+(c.left|0)||0,this.Rb=a.scrollY+(c.top|0)||0):(this.Qb=b.clientLeft||0,this.Rb=b.clientTop||0);b.width&&b.height&&(this.R=b.width/b.clientWidth,this.S=b.height/b.clientHeight)},fe:function(){if(!1===this.disabled)for(var a in this.L)this.L[a].update()},od:function(a,c){a=(a-this.Qb)*this.R;c=(c-this.Rb)*this.S;this.Uc=a-this.x;this.Vc=
c-this.y;this.x=a;this.y=c},xa:function(){this.disable();this.ka=null;a.removeEventListener("scroll",this.Ra);a.removeEventListener("resize",this.Ra);a.clearInterval(this.gd)},enable:function(){this.disabled=!1;for(var a in this.L)this.L[a].enable()},disable:function(){this.disabled=!0;for(var a in this.L)this.L[a].disable()}}),qa:c.i.extend({Y:null,X:null,enabled:!1,Pa:null,Oa:null,c:function(a){this.Y={};this.e=a;this.X=a.element;this.enable();a.xb&&this.Dc()},Dc:function(){this.xb=!0},update:function(){},
ta:function(a,c){var d=c.bind(this);this.Y[a]=d;this.X.addEventListener(a,d)},ua:function(a){this.X.removeEventListener(a,this.Y[a])},enable:function(){this.enabled||(this.Pa(),this.enabled=!0);return this},disable:function(){this.enabled&&(this.Oa(),this.enabled=!1);return this},xa:function(){this.disable();for(var a in this.e.L)if(this.e.L[a]===this){delete this.e.L[a];break}}})})})(this.t,this);
(function(c){c.r.ra.Hf=c.r.qa.extend({Ha:1,Ia:1,Qb:0,Rb:0,Pc:!0,Na:function(a){this.e.od(a.pageX,a.pageY)},xc:function(a){var b={0:"buttonY",1:"buttonX",2:"buttonA"}[a.button];this.Na(a);this.e.J(b,a);this.e.J("button",a);return!1},Dc:function(){this.Pc=!1},ee:function(a){this.Pc&&(this.Na(a),(Math.abs(this.e.Uc)>this.Ha||Math.abs(this.e.Vc)>this.Ia)&&this.e.J("move",a))},Pa:function(){this.ta("mousemove",this.ee);this.ta("click",this.xc);this.ta("contextmenu",this.xc)},Oa:function(){this.ua("mousemove");
this.ua("click");this.ua("contextmenu")}})})(this.t,this);
(function(c){c.r.ra.Touch=c.r.qa.extend({Ha:20,Ia:20,vb:70,ue:200,Ne:null,Oe:null,touches:null,Hb:"linear",set Yb(a){this.Hb=a;this.uc="linear"===a?this.Kd:this.Ld},get Yb(){return this.Hb},d:25,sb:0,uc:null,c:function(a){c.r.qa.call(this,a);this.Yb=this.Hb},Na:function(a){this.e.od(a.pageX,a.pageY)},Sb:function(a,b){for(var c=a.changedTouches,d=c.length,f;d--;)f=c[d].identifier,f=this.touches[f]||(this.touches[f]={id:f}),f.ha=a,f.jc=c[d],this.Na(f.jc),b(f,this)},update:function(){if(!this.xb){var a=
this.touches,b,c;for(c in a)b=a[c],b.He||(this.Na(b.jc),this.e.J("buttonY",b.ha))}},Tc:function(a){a.He=!0;this.e.J(a.direction,a.ha);this.xb||(a.ha.direction=a.direction,this.e.J("move",a.ha))},Kd:function(a,b){var c=b.e.x,d=b.e.y,f=c-a.Zb,g=d-a.$b,k;f<-b.Ha?(a.Zb=c,k="left"):f>b.Ha&&(a.Zb=c,k="right");g<-b.Ia?(a.$b=d,k="up"+(k?"_"+k:"")):g>b.Ia&&(a.$b=d,k="down"+(k?"_"+k:""));(a.direction=k)&&b.Tc(a)},Ld:function(a,b){var c=b.e.x,d=b.e.y,f=a.gb-c,g=a.hb-d,c=c-a.Pe,d=d-a.Qe;(f>b.Ha||f<-b.Ha)&&(g>
b.Ia||g<-b.Ia)&&(b.sb=a.ha.sb=Math.atan2(d,c),b.e.J("move",a.ha))},je:function(a){this.Sb(a,this.uc)},Rd:function(a){var b=this.e.x-a.gb,c=this.e.y-a.hb,d;b<-this.vb?d="buttonY":b>this.vb&&(d="buttonA");c<-this.vb?d="buttonX":c>this.vb&&(d="buttonB");d?this.e.J(d,a.ha):a.direction&&this.Tc(a)},cf:function(a){a.Pe=this.Ne||a.gb-Math.cos(this.sb)*this.d;a.Qe=this.Oe||a.hb-Math.sin(this.sb)*this.d},Md:function(a,b){a.start=Date.now();a.gb=a.Zb=b.e.x;a.hb=a.$b=b.e.y;"radial"===b.Yb&&b.cf(a)},Jd:function(a,
b){Date.now()-a.start<b.ue&&b.Rd(a);delete b.touches[a.id]},ke:function(a){this.Sb(a,this.Md)},ie:function(a){this.Sb(a,this.Jd)},Pa:function(){this.ta("touchmove",this.je);this.ta("touchstart",this.ke);this.ta("touchend",this.ie);this.touches={}},Oa:function(){this.ua("touchmove");this.ua("touchstart");this.ua("touchend")}})})(this.t,this);
(function(c,a){var b=a.document,e={32:"buttonB",13:"buttonY",16:"buttonX",17:"buttonA",37:"left",38:"up",39:"right",40:"down",105:"up_right",103:"up_left",99:"down_right",97:"down_left"};c.r.ra.Ef=c.r.qa.extend({Va:null,keys:null,ae:function(a){this.keys[a.keyCode]=a;this.Va[a.keyCode]&&a.preventDefault()},c:function(a){this.keys={};c.r.qa.call(this,a);null===this.Va&&c.extend(this.Va={},e)},be:function(a){this.keys[a.keyCode]=!1},update:function(){var a,b,c;for(c in this.Va)if(b=this.keys[c])a=this.Va[c],
this.e.J(a,b),32<c&&(b.direction=a,this.e.J("move",b)),this.e.J("button",b)},Pa:function(){this.keys={};this.Y.ad=this.ae.bind(this);this.Y.bd=this.be.bind(this);b.addEventListener("keydown",this.Y.ad);b.addEventListener("keyup",this.Y.bd)},Oa:function(){this.keys={};b.removeEventListener("keydown",this.Y.ad);b.removeEventListener("keyup",this.Y.bd)}})})(this.t,this);(function(c,a){a.navigator.zg&&(c.r.ra.Df=c.r.qa.extend({Pa:function(){},Oa:function(){}}))})(this.t,this);(function(c){c.we={Nf:{Xf:c.v.K("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPxJREFUeNqckzEKwjAUhlPB6hm8QUd1EbpVRHAS0eO0N3DuIVx0EaSoHbtoR2/gFVorGv/oSwnRIfHBlwba/Pnf63sO53zDGLuCNdgxs/DAAvQZBCL+iQfIwRL4gGl4IAQpKOlM7IgXUMpBS7nhDs4gARUIwAC0lW+eYCLVU24fwi1rkNqe2cfhvSr5FRa3V7JOapGOFgKZPNf4smQWidyoAq6FQPVLYGQhENQ7ysWnwphGQYWvHcxA08KBaKi5mkLwRx8MxSJaeYznVqtHCTL6My7Vp6e5vIGuyD+mvEpq6VDmp+HToOU0eCIih8b5BFbgYmhfuJ6CzkuAAQBw8IUZ2uqgnAAAAABJRU5ErkJggg=="),
rg:c.v.K("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAO5JREFUeNpi/P//PwMeEA3EL4B4Ly4FjAQM2APEH4E4GKcKkAE4sD0Q/wXi30BshEsdEx7b04AYJM8CxDmkukANiL/+R4DPQKyCTS0oDJKA5kgBsTgSlodiZPAIiB8C8WsgfgnEr4D4KcgUbyB+/Z908AKInWBOMQXiOyRovgXE+uAYRPKPIhCfIULzKSCWg+lDDxRhIL6LR/NDIBbEF42fgVgIT9SKgiIOWQDdAEsgFsBjACcQW+AzwADNNZ1A3AjE75DEDfElpPnQ5Lscmphg4rJAPAeIfwHxKmQ96AYsBGJnPPkDFN0LkMUAAgwAJMvR40MRRPUAAAAASUVORK5CYII=")},Lf:{wf:function(){}},
sf:{Af:function(){}},Text:{Jf:function(a){var b=this.stroke||this.fill||a.fillStyle,c=this.Wa||a.lineWidth;a.strokeStyle=b;a.globalAlpha=.2;a.lineWidth=c+10;a.strokeText(this.text,this.b,this.a);a.globalAlpha=.4;a.lineWidth=c+5;a.strokeText(this.text,this.b,this.a);a.globalAlpha=1;a.lineWidth=c;a.strokeText(this.text,this.b,this.a);a.globalCompositeOperation="lighter";a.fillStyle=b;a.fillText(this.text,this.b,this.a)},Gf:function(a){this.Ib(a);a.scale(1,-1);var b=this.a;this.a-=2*this.za;this.Ua||
(this.Ua=a.createLinearGradient(-this.b,this.a,-this.b,this.a+this.za),this.Ua.addColorStop(1,this.fill||a.fillStyle),this.Ua.addColorStop(0,"transparent"));a.fillStyle=this.Ua;this.Ib(a);this.a=b}},kb:{se:function(a){return new c.Ma({target:a,duration:30,ga:!0,ca:{alpha:0},G:{alpha:1}})},te:function(a){return new c.Ma({target:a,ga:!0,duration:30,G:{alpha:0}})},expand:function(a,b){b=b||1.5;return new c.Ma({target:a,ga:!0,duration:30,G:{R:a.R+b,S:a.S+b}})},gc:function(a){a=new c.Ma({target:a,d:3,
duration:10,ga:!0,G:{x:a.x,y:a.y}});a.Lc=function(a,e){return 1===e?this.G[a]:this.ca[a]-this.d+c.Te(2*this.d)};return a}}}})(this.t);/*

 j5g3 GDK 0.1 - Game Development Kit
 http://j5g3.com

 Copyright 2010-2012, Giancarlo F Bellido

 j5g3 is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 j5g3 is distributed in the hope that it will be useful
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with j5g3. If not, see <http://www.gnu.org/licenses/>.

 Date: @DATE

*/
(function(c,a){var b=a.P={version:.1};b.uf=a.i.extend({target:null,parent:null,tg:0,ug:0,update:function(){}});b.rc=a.o.extend({pd:null,qd:null,H:null,Kb:a.o.prototype.remove,$:null,yc:function(){this.Kb();this.$&&this.$()},remove:function(){this.H&&this.H.remove();this.qd?(this.add(this.H=this.qd(this)),this.H.$=this.yc.bind(this)):this.yc()},c:function(b){a.o.apply(this,[b]);this.pd&&this.add(this.H=this.pd(this))}});a.P.Element=a.o.extend({Ob:null,Nb:null,Fa:null,direction:null,state:null,c:function(b){this.Ob=
{};this.Nb={};a.o.apply(this,[b]);this.stop()},qg:function(b){var c=this.Nb,f;for(f in b)b.hasOwnProperty(f)&&(c[f]="string"===typeof b[f]?a.id(b[f]):b[f]);return this},sg:function(a){var b,c=0,g=this.Fa;this.kd();for(b in a)a.hasOwnProperty(b)&&(this.Ob[b]=c++,this.Pb(g.clip(a[b])));return this},Re:function(a){(a=this.Nb[a])&&!a.Cb&&a.play()},Tb:function(a){this.Re(a);return this.state===a?this:this.go(this.Ob[this.state=a])}});a.P.If={Mf:{gg:function(a,b,c){return function(){this.Vb<a&&(this.Vb+=
1,this.ig.bg(0,b));this.Tb(c)}},yg:function(a,b,c){return function(){this.ma=Math.abs(this.ma)*a;this.x+=b;c&&0===this.Vb&&this.Tb(c)}},state:function(a){return function(){this.Tb(a)}}}};a.P.rf=a.h.extend({da:null,set x(a){for(var b=this.da.length;b--;)this.da[b].x=a*this.da[b].q;return this.j.s=a},get x(){return this.j.s},set y(a){for(var b=this.da.length;b--;)this.da[b].x=a*this.da[b].q;return this.j.q=a},get y(){return this.j.q},u:function(a){for(var b=this.da.length;b--;)this.da[b].w(a)},c:function(b){a.h.apply(this,
[b])}})})(this,this.t);(function(c,a){a.P=a.P||{};a.P.sc=function(a){this.f=a;this.$d();this.align()};a.P.sc.prototype={$d:function(){this.wb=a.v("DIV");this.wb.className="j5g3-stage-full";this.f.F.parentNode.appendChild(this.wb);this.wb.appendChild(this.f.F);c.addEventListener("resize",this.align.bind(this))},align:function(){var a=this.f.canvas,c=this.f.F,d=this.wb,f=d.clientHeight,d=d.clientWidth,a=a.width/a.height,g=f*a,k=f;g>d&&(g=d,k=d/a);c.style.width=Math.floor(g)+"px";c.style.height=Math.floor(k)+"px";c.style.top=
Math.floor((f-k)/2)+"px";c.style.left=Math.floor((d-g)/2)+"px"}}})(this,this.t);(function(c,a){a.Cd=a.rc.extend({Ba:c.v.K("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACyCAMAAACX4sbwAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABhQTFRF9/f37u7u9PT0/v7+4+Pj+/v7////////gYJgMwAAAAh0Uk5T/////////wDeg71ZAAAEEklEQVR42uzb7VIbMQwFUFOo7vu/cWdapiRrfdkrycrA/iMk4YzslWWtGWhy0b/r86fRCvUfNpqhPmGjHeqvazRUdWARdx1nEX+NlqrDrMdx68O6JKsmrIuqHWt2jkaqXiy0YlEfFmfAaRY/j06zhAE7zCKTdSBvybngJItasrTMyVLH8RRF3EujUkXqa9VFs8ri4zfySSpLwI+qQPEIKaSjEDUndJxgkcVi35m92SeNha8fufccY+nzbxSqyD8DR6GK/EHNYr33ZL1tj2Fmlh89WV9/gC8VmMRawHqAELulZ0r8BiwurT688T2Hxfdh+GDxJXNL1lsKS2hasWPIsj7KWa60mhItqZfmZ/2KZF0hIstMq7+rWb5sH5m3rpOJ3eI8+kpYHx6WNsdSWDStISpL7SLFsebFBtLUsnevYSzyseaQSr2SEakiZQxJG+kUFjlZ/mBFsIhjcS0Qf7ACWJQQrPssmmdPFUteMa7dA4vlbVmOlZy0rML1MaYzWA6Wsp2atlukzHiFNe+OxkJOMlXaGMr1KrdnGws5yVTtsbgN7j5LU5HWo5SfUMPLErfq7DbeUJGWUZ7/wnB3g2wVFoOltCi2WGSotljYYtmxggGAyoKf5QoWFllwqNws4x50sJaaqjdZWuYlNwtLLPs2VF+2x1pebG+xsMWCo3M5NjK88I1y2nSGe5Xlq3T8LHXT757y2GF5msy3WOjGWqoL5SV4XfXNWFTAEm5vPwsJLCnrXO918bBmCot0ljhuqSwlyUOPUCJLXXugBugJGsoyFjRLlRUti0XeYIWyjOXfVN0Zw30WHWdhg4UkFt1lUSlrPVh9WFq0z7Fuq0SWb3sgZ8981sIWlS2ZA1lmsBi9tO0pZEFkeTeoZayHMvYQy5iClMTyBsvDQjLra0UxblgqZF1ntbKeZ7GkRixcvZfbFfMyy1X9PLMQxpLa1juqXBZ1Y62OIRWyzAeK0y78nopj3RpDasxCAkuqnlxjeC0QkcR6Dpb0OCN6DNdYxlPNOVhxLG0MjSfTcWO4xKJWLPPsxVyN3VWxc0s4dVUYLKuCgOPUHyQWKljkvA8jxjCAJTbkkMmyZlZssbzPEvZA9x+orLDOBGuXlbM79JaB4lmwleMRdSyzIYdUltBFM3u9qGc5WtAoYMkdU+FzQAqLnCzhgyhhiT1S7tt+IeiyBlFseyP1sqIlsXCUJT0kQEsWzrJyUngOC0dYxoFA4DRr/gWqrgVW5fV6LPywXpVFP6yXZ1FLVhPVhUU/LD+LWrKoJYtasqglq5WqO4tasiKOsMazqCUr5gjrN2EFHWENZkUdYS1g4ThL/S/yFqw2KoyWwXopFlqxqDcLjVhtahqJhZYstGCho2pioQsLDVVP9VYfFf4IMACQm8FBYS9cMwAAAABJRU5ErkJggg=="),
O:c.rect({fill:"transparent",stroke:"#fff",width:100,height:20}),fill:c.rect({width:0,height:20,fill:"#eee"}),text:c.text({font:"10px sans-serif",fill:"#eee"}),Aa:null,me:!0,Ya:function(a){this.text.text=(100*a|0)+"%";this.text.Kc("center");this.fill.width=this.O.width*a;this.Q()},update:function(){this.me&&this.align("center middle");this.Aa&&(this.Aa.Ya=this.Ya.bind(this),this.Aa.ready(this.remove.bind(this)));this.update=null},c:function(b){a.rc.call(this,b);this.O.A((this.Ba.width-this.O.width)/
2+2,this.Ba.height+20);this.fill.A(this.O.x,this.O.y);this.text.A(this.Ba.width/2,this.O.y+this.O.height+8);this.size(Math.max(this.Ba.width,this.O.width),this.Ba.height+40+this.O.height).add([this.Ba,this.fill,this.O,this.text]);this.b=-this.width/2;this.a=-this.height/2}})})(this.t,this.t.P);var h=window.t,m=h.Aa(),s=h.we,w=m.ya("resources/background.jpg"),x=m.ya("resources/blocks-ss.png"),y=m.ya("resources/logo.png"),z=m.ya("resources/play.png"),A=m.ya("resources/score.png"),B=m.ya("resources/gameover.png"),C={pop:m.audio("resources/pop.ogg"),slide:m.audio("resources/slide.ogg"),rotate:m.audio("resources/rotate.ogg"),line:m.audio("resources/line.ogg"),gameover:m.audio("resources/gameover.mp3")},E=h.pa.extend({Id:[3,4,3,2,3,3,3],ba:48,Ga:48,md:1,va:0,Td:function(c,a){switch(c){case 0:return[[[a],
[a],[a,a]],[[a,a,a],[a]],[[0,a,a],[0,0,a],[0,0,a]],[[],[0,0,a],[a,a,a]]];case 1:return[[[0,a],[0,a],[0,a],[0,a]],[[],[a,a,a,a],[],[]],[[0,0,a],[0,0,a],[0,0,a],[0,0,a]],[[],[],[a,a,a,a],[]]];case 2:return[[[a],[a,a],[a]],[[a,a,a],[0,a],[]],[[0,0,a],[0,a,a],[0,0,a]],[[],[0,a],[a,a,a]]];case 3:return[[[a,a],[a,a]],[[a,a],[a,a]],[[a,a],[a,a]],[[a,a],[a,a]]];case 4:return[[[0,a],[0,a],[a,a]],[[a],[a,a,a],[]],[[0,a,a],[0,a],[0,a]],[[],[a,a,a],[0,0,a]]];case 5:return[[[0,a],[a,a],[a]],[[a,a],[0,a,a],[]],
[[0,0,a],[0,a,a],[0,a]],[[],[a,a],[0,a,a]]];case 6:return[[[a],[a,a],[0,a]],[[0,a,a],[a,a],[]],[[0,a],[0,a,a],[0,0,a]],[[],[0,a,a],[a,a]]]}},Ud:function(){var c=h.$c(7),a=this.Td(c,1+h.$c(9));return{map:a,cols:this.Id[c],rows:a[0].length,rotation:0}},c:function(){h.pa.apply(this);this.na=D.Fa.na();this.g=this.Ud();this.size(48*this.g.cols,48*this.g.rows);this.b=-this.width/2;this.a=-this.height/2;this.map=this.g.map[0];this.Oc()},Wc:function(c){for(var a=this.g.map[this.g.rotation],b=a.length,e;b--;)for(e=
0;e<a[b].length;e++)if(a[b][e]&&c(a[b][e],this.md+b,this.va+e,this))return},H:function(c,a){var b=this,e={},d={};if(!b.Xa)return b.Qc(),b.Xa=!0,e[c]=b[c],d[c]=a,b.parent.add(h.H({target:b,ga:!0,duration:3,ca:e,G:d,$:function(){b.Xa=!1;b.Oc()}}))},Ta:function(c){this.y+=c;this.md=Math.floor((this.a+this.y)/48)+1},rotate:function(c,a){var b=c||1,e=this.g.rotation+=b;4===e?this.g.rotation=0:-1===e&&(this.g.rotation=3);a&&a(0,0)?(D.ab("rotate"),this.H("rotation",this.rotation+Math.PI/2*c)):this.g.rotation-=
b},bf:function(c){this.x=48*c-this.b;this.va=c+1},left:function(c){c?this.x-=48:this.H("x",this.x-48);this.va-=1},right:function(c){c?this.x+=48:this.H("x",this.x+48);this.va+=1}}),F=h.o.extend({x:20,y:140,width:480,height:864,ea:function(){this.stretch(D.f.width-2*this.x,D.f.height-this.y-this.x);this.reset()},gc:function(){D.f.add(s.kb.gc(D.f))},Be:function(c){for(var a=c.length;a--;)if(!c[a])return!1;return!0},ib:function(c,a){var b=this.map,e=!0;this.g.Wc(function(d,f,g){if(b[f+a][g+c])return e=
!1});return e},reduce:function(){for(var c=this.map,a=c.length-1,b=0;a--;)this.Be(c[a])&&(this.Ve(c[a],a++),b++);b&&this.Me(b)},We:function(c){var a=s.kb.expand(c);a.G.x=c.x-c.width/2;a.G.y=c.y-c.height/2;a.$=function(){c.remove()};this.add([a,s.kb.te(c)])},Ve:function(c,a){var b=1,e=this.map;for(D.ab("line");b<c.length-1;b++)this.We(c[b]);for(;1<a;a--)for(b=1;10>=b;b++)e[a][b]=e[a-1][b],e[a][b].y+=48;e[0]=[10,0,0,0,0,0,0,0,0,0,0,10]},Je:function(){var c=this,a=this.map,b;D.ab("pop");this.g.Wc(function(e,
d,f){a[d][f]=b=D.Fa.bb(e+10);c.add(b.A(48*(f-1),48*(d-1)))});this.g.remove();this.reduce()},reset:function(){var c=19;for(this.map=[];c--;)this.map.push([10,0,0,0,0,0,0,0,0,0,0,10]);this.map.push([10,10,10,10,10,10,10,10,10,10,10,10])},le:function(c){c.bf(4);c.y=-c.a-48;this.add(this.g=c)}}),G=h.o.extend({fill:"#eee",font:"34px sans-serif",x:240,y:20,width:150,height:60,ea:function(){this.$a=h.text({text:"0",x:110,y:0});this.Z=h.text({text:"1",x:110,y:48});this.add([h.K(A).A(0,10),this.$a,this.Z])},
aa:function(c){this.$a.text=parseInt(this.$a.text,10)+c;this.Q()}}),H=h.o.extend({x:96,y:150,dc:function(){this.remove();this.Ca.xa();D.jf()},ea:function(){var c=h.K(y).A(0,-200),a=h.K(z).A(100,200).set({alpha:0});tween=h.H({target:c,G:{y:0},ga:!0,duration:20});tween2=s.kb.se(a);this.add([c,a,tween,tween2]);D.background.add(h.K(w));D.background.Q();this.Ca=h.r(D.f.canvas).zb("button",this.dc.bind(this))}}),I=h.o.extend({y:200,x:120,font:"bold 45px sans-serif",fill:"#eee",stroke:"#000",dc:function(){this.remove();
this.Ca.xa();D.f.add(new H)},ea:function(){var c=h.text("Restart").A(120,300);c.u=h.T.tc;this.add([h.K(B),c]);c.Kc("center");this.Ca=h.r(D.f.canvas).zb("button",this.dc.bind(this))}});h.o.extend({ea:function(){this.add([h.text("CONTROLS"),h.Ie()])}});
var J=h.o.extend({speed:1.5,Z:0,Ea:null,yb:null,left:function(c){!this.g.Xa&&this.p.ib(-1,1)&&this.g.left("touchmove"===c.type)},right:function(c){!this.g.Xa&&this.p.ib(1,1)&&this.g.right("touchmove"===c.type)},click:function(){this.g.Xa||this.g.rotate(1,this.p.ib.bind(this.p))},Ae:function(){for(var c=1,a=this.p.map[0];10>=c;c++)if(a[c])return!0},xe:function(){this.remove();this.Nc.remove();this.Ea.remove();this.yb.remove();this.Ca.xa();D.ab("gameover");D.background.Q();D.f.add(new I)},Ub:function(){this.g.Ta(this.speed);
!1===this.p.ib(0,1)&&(this.p.Je(),this.Xc())},Ta:function(){this.g.Ta(24);this.Ub()},ef:function(){for(D.ab("slide");this.p.ib(0,1);)this.g.Ta(24);this.p.gc();this.Ub();this.Ca.kf(300)},kc:function(){this.Ub();this.Ae()&&this.xe()},$a:function(c){this.Z+=c;this.Ea.aa({1:100,2:250,3:400,4:800}[c]);10<this.Z&&(this.speed+=.2,this.Z-=10,this.Ea.Z.text=parseInt(this.Ea.Z.text,10)+1)},ea:function(){this.p=new F;this.Nc=h.rect({x:this.p.x,y:this.p.y,R:this.p.R,S:this.p.S,width:this.p.width,height:this.p.height,
fill:"#000",alpha:.5});this.Ea=new G;this.yb=h.clip({x:50,y:30,R:.4,S:.4,width:100,height:100});D.background.add([this.Ea,this.yb,this.Nc]).Q();this.la=new E;this.add([this.p]).Xc();this.Ca=h.r(D.f.canvas).zb({up:this.click.bind(this),left:this.left.bind(this),right:this.right.bind(this),down:this.Ta.bind(this),buttonB:this.ef.bind(this)});this.p.Me=this.$a.bind(this)},Xc:function(){this.g=this.la.remove();this.p.le(this.la);this.la=new E;this.la.A(-this.la.b,-this.la.a);this.yb.add(this.la).Q()}}),
D=h.re({cb:{width:480,height:800,F:!0},Fe:new h.P.Cd({Aa:m,$:function(){D.hf()}}),ab:function(c){C[c].currentTime=0;C[c].play()},jf:function(){this.f.add(new J)},hf:function(){this.Fa=h.Fa(x).ye(10,2);this.f.add(new H)},hc:function(){new h.P.sc(this.f);this.background=this.f.De({background:!0});this.f.add(this.Fe);this.nd()}});
