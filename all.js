//# sourceMappingURL=all.js.map
(function(c,a){function b(a){c.addEventListener("load",function(){new b.fc(a)})}c.v=b;b.extend=function(a,b){for(var f in b)a[f]=b[f]};b.extend(b,{i:function(a){this.extend(a)},da:function(a){return function(b){return new a(b)}},id:function(b){return a.getElementById(b)},ready:function(a){c.addEventListener("load",a,!1)},q:function(b){return a.createElement(b)}});b.q.src=function(b,c){var f=a.createElement(b);f.setAttribute("src",c);return f};b.q.L=function(a){return b.q.src("img",a)};b.i.extend=
function(a,c){function f(){}var g,k=this,m=a.d||function(){k.apply(this,arguments)},r;f.prototype=k.prototype;m.prototype=new f;m.extend=b.i.extend;for(g in a)a.hasOwnProperty(g)&&(r=Object.getOwnPropertyDescriptor(a,g),Object.defineProperty(m.prototype,g,r));for(g in c)c.hasOwnProperty(g)&&(r=Object.getOwnPropertyDescriptor(c,g),Object.defineProperty(m,g,r));return m};b.i.prototype.extend=function(a){for(var b in a)this[b]=a[b]}})(this,this.document);
(function(c,a,b){var e=a.q("CANVAS"),d=a.da;a.extend(a,{Ee:function(a){return Math.random()*a},Nc:function(a){return Math.random()*a|0},Bf:function(a,b,c){var e=[],d;if(b)for(;b--;)for(e[b]=[],d=0;d<a;d++)e[b][d]=c;else for(;a--;)e.push(c);return e},canvas:function(f,b){var c=a.q("CANVAS");c.setAttribute("width",f);c.setAttribute("height",b);return c},ea:function(f){var b=typeof f;if("object"===b){if(null===f)return"null";if(f instanceof Array)return"array";if(f instanceof a.i)return"j5g3";if(f instanceof
c.HTMLElement||f instanceof c.Image)return"dom";if(f instanceof c.HTMLAudioElement)return"audio"}return b},Ma:function(a,b,c,m){return e.getContext("2d").createLinearGradient(a,b,c,m)},Rf:function(a,g,c,e){e===b&&(e=1);return"rgba("+a+","+g+","+c+","+e+")"},Jf:function(a,g,c,e){e===b&&(e=1);return"hsla("+a+","+g+"%,"+c+"%,"+e+")"}});a.ha={ib:function(){},ed:function(a){this.P(a);this.t(a);this.end(a)},sf:function(a){this.t(a)},pd:function(){var a=this.Ka;a.clearRect(0,0,this.width,this.height);this.P(a);
this.t(a);this.end(a);this.screen.clearRect(0,0,this.width,this.height);this.screen.drawImage(this.va,0,0)},qd:function(){var a=this.Ka,b=this.w,c=this.K,e=this.A,d=this.J;0!==c&&0!==d&&(a.clearRect(b,e,c,d),this.P(a),this.t(a),this.end(a),this.screen.clearRect(b,e,c,d),this.screen.drawImage(this.va,b,e,c,d,b,e,c,d),this.w=this.A=null,this.J=this.K=0)},vf:function(){var a=this.Ka;this.clearRect(0,0,this.canvas.width,this.canvas.height);this.P(a);this.t(a);this.end(a)},jf:function(a){a.drawImage(this.source,
this.x+this.b,this.y+this.a)},cb:function(a){a.drawImage(this.yd,0,0,this.width,this.height,this.x+this.b,this.y+this.a,this.width,this.height)}};a.Y={Image:function(a){a.drawImage(this.source,this.b,this.a)},gb:function(a){var b=this.source;a.drawImage(b.L,b.x,b.y,b.bd,b.Lc,this.b,this.a,this.width,this.height)},Ca:function(a){var b=this.frame,c=b;for(a.translate(this.b,this.a);(c=c.B)!==b;)c.D(a)},Text:function(a){a.fillText(this.text,this.b,this.a)},od:function(a){for(var b=this.text.split("\n"),
c=0,e=b.length,d=0;c<e;c++)a.fillText(b[c],this.b,this.a+d),d+=this.ta},yf:function(a){a.strokeText(this.text,this.b,this.a)},sd:function(a){a.fillText(this.text,this.b,this.a);a.strokeText(this.text,this.b,this.a)},ia:function(a){var b=this.map,c=b.length,e,d=this.ga,l,p;for(a.translate(this.b,this.a+c*this.xa);c--;)for(e=b[c].length,p=b[c],a.translate(e*this.X,-this.xa);e--;)a.translate(-this.X,0),(l=d[p[e]])&&l.D(a)},lf:function(a){var b=this.map,c=0,e,d=b.length,l=this.ga,p;e=(this.X/2|0)+this.offsetX;
var q=(this.xa/2|0)+this.offsetY,t,u;a.translate(this.b,this.a-q);for(t=e;c<d;c++)for(e=b[c].length,p=b[c],t=-t,a.translate(e*this.X-t,q);e--;)a.translate(-this.X,0),(u=l[p[e]])&&u.D(a)}};a.cb={dd:function(f,b){var c=a.q("CANVAS"),e;c.width=f||this.width;c.height=b||this.height;e=c.getContext("2d",!1);e.translate(-this.x-this.b,-this.y-this.a);this.Dc();this.D(e);this.yd=c;this.rc=this.D;this.D=a.ha.cb;return this},Xe:function(a,b){return a(b,e.getContext("2d"))}};a.Da={ib:function(){return!1},Ba:function(a,
b,c){c=c?c.product(this.p,this.x,this.y):this.p.wb(this.x,this.y);c.Zb(a,b);return c.x*c.x+c.y*c.y<=this.c*this.c?this:!1},Ca:function(a,b,c){var e=this.frame,d=e,l;for(c=c?c.product(this.p,this.x,this.y):this.p.wb(this.x,this.y);(d=d.G)!==e&&!(l=d.Ia(a,b,c)););return l},Rect:function(a,b,c){c=c?c.product(this.p,this.x,this.y):this.p.wb(this.x,this.y);c.Zb(a,b);return 0<c.x&&c.x<this.width&&0<c.y&&c.y<this.height?this:!1},fb:function(a,b,c){var e=this.U,d=this.Pb,l=0,p=e.length;c=c?c.product(this.p,
this.x,this.y):this.p.wb(this.x,this.y);for(c.Zb(a,b);l<p;l+=2)if(a=d[l]*(c.x-e[l])+d[l+1]*(c.y-e[l+1]),0<a)return!1;return this}};a.nd=a.i.extend({j:1,k:0,l:0,m:1,zb:1,Eb:0,Qa:1,Ra:1,d:function(a,c,e,d){a!==b&&(this.j=a,this.k=c,this.l=e,this.m=d)},Le:function(a){this.zb=Math.cos(a);this.Eb=Math.sin(a);return this.kb()},Me:function(a){this.Qa=a;return this.kb()},Ne:function(a){this.Ra=a;return this.kb()},scale:function(a,b){this.Qa=a;this.Ra=b;return this.kb()},kb:function(){this.j=this.Qa*this.zb;
this.k=this.Qa*this.Eb;this.l=-this.Ra*this.Eb;this.m=this.Ra*this.zb;return this},wb:function(f,b){return new a.gc(this.j,this.k,this.l,this.m,f||0,b||0)}});a.gc=a.i.extend({j:1,k:0,l:0,m:1,r:0,s:0,d:function(a,c,e,d,r,l){a!==b&&(this.j=a,this.k=c,this.l=e,this.m=d,this.r=r,this.s=l)},translate:function(a,b){this.r+=a;this.s+=b},multiply:function(a,b,c,e,d,l){var p=this.j,q=this.k,t=this.l,u=this.m;this.j=p*a+t*b;this.k=q*a+u*b;this.l=p*c+t*e;this.m=q*c+u*e;this.r+=p*d+t*l;this.s+=q*d+u*l;return this},
clone:function(){return a.se().multiply(this.j,this.k,this.l,this.m,this.r,this.s)},inverse:function(){var a=this.clone(),b=this.j*this.m-this.k*this.l;a.j=this.m/b;a.k=this.k/-b;a.l=this.l/-b;a.m=this.j/b;a.r=(this.m*this.r-this.l*this.s)/-b;a.s=(this.k*this.r-this.j*this.s)/b;return a},product:function(a,b,c){return this.clone().multiply(a.j,a.k,a.l,a.m,a.r||b||0,a.s||c||0)},reset:function(){this.j=1;this.l=this.k=0;this.m=1;this.s=this.r=0;return this},Xf:function(a,b){this.x=this.j*a+this.l*b+
this.r;this.y=this.k*a+this.m*b+this.s;return this},Zb:function(a,b){var c=this.j*this.m-this.k*this.l;this.x=(this.m*a-this.l*b+this.l*this.s-this.m*this.r)/c;this.y=(-this.k*a+this.j*b+this.k*this.r-this.j*this.s)/c;return this}});a.h=a.i.extend({source:null,B:null,G:null,parent:null,p:null,x:0,y:0,b:0,a:0,width:null,height:null,vc:0,set rotation(a){this.p.Le(this.vc=a)},get rotation(){return this.vc},set V(a){this.p.Me(a)},get V(){return this.p.Qa},set W(a){this.p.Ne(a)},get W(){return this.p.Ra},
alpha:1,zc:null,stroke:null,fill:null,font:null,Oa:null,Kb:null,Lb:null,Sc:null,Ff:!0,d:function(b){this.p=new a.nd;this.extend(b)},P:function(a){var b=this.p;a.save();1!==this.alpha&&(a.globalAlpha*=this.alpha);null!==this.fill&&(a.fillStyle=this.fill);null!==this.stroke&&(a.strokeStyle=this.stroke);null!==this.font&&(a.font=this.font);null!==this.zc&&(a.globalCompositeOperation=this.zc);null!==this.Oa&&(a.lineWidth=this.Oa);null!==this.Kb&&(a.lineCap=this.Kb);null!==this.Lb&&(a.lineJoin=this.Lb);
null!==this.Sc&&(a.miterLimit=this.Sc);a.transform(b.j,b.k,b.l,b.m,this.x,this.y)},end:function(a){a.restore()},D:a.ha.ed,Bb:null,S:function(){this.parent.S(this)},update:null,remove:function(){this.parent&&(this.G.B=this.B,this.B.G=this.G,this.parent=this.G=null);return this},align:function(a,b){b=b||this.parent;switch(a){case "center":this.x=b.width/2;break;case "left":this.x=0;break;case "right":this.x=b.width-this.width;break;case "middle":this.y=b.height/2;break;case "center middle":this.M(b.width/
2,b.height/2);break;case "origin":this.M(-this.width/2,-this.height/2);break;case "origin top":this.M(-this.width/2,-this.height);break;case "origin bottom":this.M(-this.width/2,0)}return this},M:function(a,b){this.x=a;this.y=b;return this},size:function(a,b){this.width=a;this.height=b;return this},move:function(a,b){this.x+=a;this.y+=b;return this},visible:function(){return 0<this.alpha},stretch:function(a,b){return this.scale(a/this.width,b/this.height)},Vf:function(){return a.clip({width:this.width,
height:this.height}).add(this)},Bc:a.cb.dd,Dc:function(){this.rc&&(this.D=this.rc)},set:function(a){this.extend(a);return this},Ia:a.Da.Rect,scale:function(a,b){c.isNaN(a)||(this.V=a);c.isNaN(b)||(this.W=b);return this},rotate:function(a){this.rotation+=a;return this}});a.Image=a.h.extend({d:function(b){switch(a.ea(b)){case "string":b={source:a.id(b)};break;case "dom":b={source:b}}a.h.call(this,b);this.source&&this.Qe(this.source)},t:a.Y.Image,Gd:function(b){return"string"===typeof b?a.id(b):b},Qe:function(a){this.source=
this.Gd(a);null===this.width&&(this.width=this.source.naturalWidth||this.source.width);null===this.height&&(this.height=this.source.naturalHeight||this.source.height)}});a.Text=a.h.extend({text:"",ta:null,zf:null,Zd:function(a){var b=this.Rc();"left"===a?this.b=0:"center"===a?this.b=-b/2:"right"===a&&(this.b=-b);return this},d:function(b){"string"===typeof b&&(b={text:b});a.h.call(this,b);null===this.ta&&this.Rc()},Bb:a.Y.Text,t:a.Y.Text,Pd:function(b,c){var e=(""+b.text).split("\n"),d,r=e.length,
l=0;a:{d=b;do{if(null!==d.font){d=d.font;break a}if(d instanceof a.hb)break}while(d=d.parent);d=void 0}b.P(c);d&&(c.font=d);for(;r--;)d=c.measureText(e[r]),d.width>l&&(l=d.width);null===b.ta&&(b.ta=parseInt(c.font,10));b.end(c);return l},yb:a.h.prototype.P,P:function(a){a.textBaseline="top";this.yb(a)},Rc:function(){return a.cb.Xe(this.Pd,this)}});a.jd=a.h.extend({Mc:"",d:function(b){"string"===typeof b&&(b={Mc:a.q(b).innerHTML});a.h.apply(this,[b])}});a.u=a.h.extend({O:null,la:0,length:null,Vb:!0,
Te:1,d:function(b){a.h.call(this,b);this.O=[];this.wc();null!==this.$&&this.$()},S:function(a){this.parent.S(a||this)},$:null,update:function(){var a=this.frame,b=a;for(this.ac&&this.ac();(b=b.B)!==a;)null!==b.update&&b.update();this.Vb&&((this.la+=this.Te)>=this.length&&(this.la=0),this.frame=this.O[this.la|0])},frame:null,t:a.Y.Ca,stop:function(){this.Vb=!1;return this},play:function(){this.Vb=!0;return this},add:function(b){switch(a.ea(b)){case "function":b=new a.cc(b);break;case "string":b=new a.Image({source:b});
break;case "array":for(var c=0;c<b.length;c++)this.add(b[c]);return this;case "dom":case "object":b=new a.Image(b);break;case "undefined":case "null":throw"Trying to add undefined object to clip.";}return this.xc(b)},xc:function(a){var b=this.frame;a.parent&&a.remove();b.G.B=a;a.G=b.G;a.B=b;a.parent=this;b.G=a;return this},wc:function(a){var b={};b.G=b.B=b;this.O.push(b);this.go((this.length=this.O.length)-1);return a?this.add(a):this},Lf:function(){return this.frame.B===this.frame},He:function(a){a=
a===b?this.la:a;this.O.splice(a,1);this.go(0<a?a-1:0);this.length=this.O.length;return this},go:function(a){this.frame=this.O[this.la=a];return this},lb:function(a){for(var b=this.O.length,c,e;b--;)for(e=c=this.O[b];(e=e.B)!==c;)a(e);return this},Hf:function(a){for(var b=this.frame,c=b,e;(c=e=c.B)!==b;)for(;(e=e.B)!==b;)a(c,e)},Af:function(a){return this.lb(function(b){b.align&&b.align(a)})},Ia:a.Da.Ca});a.hb=a.u.extend({canvas:null,Ka:null,screen:null,va:null,Tf:!1,background:!1,C:!1,w:0,A:0,K:0,
J:0,Jd:function(){if(!1===this.C)return this.C=c.document.body;if("dom"===a.ea(this.C))return this.C;var b=this.C=a.q("DIV");b.className="j5g3-stage";c.document.body.appendChild(b);return b},Id:function(){var b=this.Jd();this.canvas||(this.canvas=a.canvas(this.width,this.height),this.background?b.insertBefore(this.canvas,b.firstChild):b.appendChild(this.canvas));this.va=a.q("CANVAS")},Kd:function(){this.Ka=this.va.getContext("2d");this.screen=this.canvas.getContext("2d")},d:function(b){a.u.call(this,
b);this.Id();this.Je(this.width||this.canvas.clientWidth||640,this.height||this.canvas.clientHeight||480);this.Kd()},pe:function(b){var c;"string"===typeof b&&(b={canvas:a.id(b)});a.extend(c={width:this.width,height:this.height,C:this.C},b);b=new a.hb(c);b.D=a.ha.qd;this.add(b);return b},S:function(a){if(a===b)this.w=this.A=0,this.J=this.height,this.K=this.width;else{var c=a.x+a.b,e=a.y+a.a;null===this.w?this.w=c:c<this.w&&(this.K+=this.w-c,this.w=c);null===this.A&&(this.A=e);e<this.A&&(this.J+=this.A-
e,this.A=e);c+a.width>this.w+this.K&&(this.K=c+a.width-this.w,this.w+this.K>this.width&&(this.K=this.width-this.w));e+a.height>this.A+this.J&&(this.J=e+a.height-this.A,this.A+this.J>this.height&&(this.J=this.height-this.A))}},Je:function(a,b){if(0===a||0===b)throw Error("Invalid stage resolution: "+a+"x"+b);this.K=this.canvas.width=this.va.width=a;this.J=this.canvas.height=this.va.height=b;return this.size(a,b)},D:a.ha.pd});a.Ea=a.h.extend({ba:!1,repeat:Infinity,duration:100,Z:null,target:null,F:null,
Xa:0,Vc:null,sb:null,d:function(b){b instanceof a.i&&(b={target:b});this.update=this.start;a.h.apply(this,[b])},D:a.ha.ib,pause:function(){this.sc=this.update;this.update=null;return this},Ke:function(){this.update=this.sc?this.sc:this.start;return this},Yc:function(){this.repeat-=1;this.ab=this.Xa=0;return this},Qf:function(){this.Xa=0;return this.stop().start()},stop:function(){this.pause().Yc();this.Vc&&this.Vc();return this},ce:function(a){return a},yc:function(a,b){return this.Z[a]+this.ce(b)*
(this.F[a]-this.Z[a])},Sd:a.h.prototype.remove,remove:function(){this.sb&&this.sb();this.Sd()},zd:function(){var a=this.target,b;this.duration===this.Xa&&(this.ab=1);for(b in this.F)a[b]=this.yc(b,this.ab);this.Xa<this.duration?(this.Xa++,this.ab+=this.Ye):this.ba?this.remove():this.repeat?this.Yc():this.stop()},start:function(){var a=this.F,b,c=this.target;if(null===this.Z)for(b in this.Z={},a)this.Z[b]=c[b];this.Ye=1/this.duration;this.ab=0;this.update=this.zd;return this},Ia:a.Da.ib});a.gb=a.h.extend({d:function(b){a.h.call(this,
b);if(!this.source)throw Error("Invalid source property for Sprite");null===this.width&&(this.width=this.source.bd);null===this.height&&(this.height=this.source.Lc)},t:a.Y.gb});a.rd=a.i.extend({width:null,height:null,jb:null,d:function(b){switch(a.ea(b)){case "string":case "dom":case "j5g3":b={source:b}}a.i.call(this,b)},set source(b){switch(a.ea(b)){case "string":case "dom":b=new a.Image(b);break}if(!b)throw Error("Invalid source for Spritesheet.");null===this.width&&b&&(this.width=b.width);null===
this.height&&b&&(this.height=b.height);this.Td=b;this.jb=[]},get source(){return this.Td},select:function(a){var b=[];this.lb(a,function(a){b.push(a)});return b},lb:function(a,b){for(var c=0,e=a.length;c<e;c++)b(this.Ua(a[c]));return this},clip:function(b){var c=a.clip().He(),e=0,d=0;this.lb(b,function(a){c.wc(a);a.width>e&&(e=a.width);a.height>d&&(d=a.height)});return c.size(e,d).go(0)},push:function(a,b,c,e){this.slice(a,b,c,e);return this},slice:function(a,b,c,e){return this.jb.push({width:c,height:e,
source:{L:this.source.source,x:a,y:b,bd:c,Lc:e}})-1},Df:function(a,b,c,e){return this.Ua(this.slice(a,b,c,e))},ke:function(a,b,c){c=c||0;var e=2*c,d=this.width/a-e|0,l=this.height/b-e|0,p,q;for(p=0;p<b;p++)for(q=0;q<a;q++)this.slice(q*(d+e)+c,p*(l+e)+c,d,l);return this},Ua:function(b){return new a.gb(this.jb[b])},ga:function(){for(var a=0,b=this.jb.length,c=[];a<b;a++)c.push(this.Ua(a));return c},map:function(b,c){return new a.ia({ga:this.ga(),X:b,xa:c})}});a.hd=a.u.extend({d:function(b){a.u.apply(this,
[b])},source:a.u,ae:function(){this.Od--?null!==this.mc&&this.mc():this.remove()},qe:10,Tc:null,count:1,Se:function(){var a=new this.source;a.Od=this.qe;a.mc=a.update;a.update=this.ae;return a},Bd:function(){var a=this.Se();this.xc(a);this.Tc&&this.Tc(a)},ac:function(){for(var a=this.count;a--;)this.Bd()}});a.ia=a.h.extend({ga:null,map:null,X:0,xa:0,offsetX:0,offsetY:0,d:function(b){a.h.apply(this,[b]);null===this.map&&(this.map=[])},Wf:function(a,b){var c=(this.X/2|0)+this.offsetX;return{x:(a*this.X-
(b%2?0:-c)|0)-this.b,y:(b*((this.xa/2|0)+this.offsetY)|0)-this.a}},t:a.Y.ia});a.cc=a.i.extend({Hd:a.i,update:null,D:a.ha.ib,d:function(b){"function"===a.ea(b)&&(b={update:b});this.Hd(b)},remove:a.h.prototype.remove},{rotate:function(a){return function(){a.rotation=6.1>a.rotation?a.rotation+.1:0}}});a.fc=a.i.extend({version:"0.9.0",xb:31,Db:null,nc:null,uc:0,oc:0,paused:!0,$c:function(){var a=this;a.Ec();a.Db=function(){a.tc()};a.tc();a.nc=function(){a.Dd()};a.oc=c.setInterval(a.nc,a.xb);a.paused=
!1;return a},Ec:function(){c.clearInterval(this.oc);c.cancelAnimationFrame(this.uc)},qa:function(){this.pause();this.we&&this.we()},tc:function(){this.f.D();this.uc=c.requestAnimationFrame(this.Db)},Dd:function(){this.f.update()},Yb:function(){},d:function(d){"function"===typeof d&&(d={Yb:d});d===b&&(d={});e.style.display="none";e.setAttribute("id","j5g3-cache");c.document.body.appendChild(e);a.i.apply(this,[d]);this.Va||(this.Va={});this.Va.canvas||(this.Va.canvas=a.id("screen"));this.f||(this.f=
new a.hb(this.Va));this.Yb(a,this)},pause:function(){this.Ec();this.Db=function(){};this.paused=!0},Ke:function(){this.paused&&this.$c()},set he(a){this.xb=1E3/a},get he(){return 1E3/this.xb},Kf:function(b,c){var d,m;switch(a.ea(b)){case "string":d=a.id(b);break;case "dom":d=b;break;case "j5g3":d=b.source}return d?(e.width=d.width,e.height=d.height,m=e.getContext("2d"),m.drawImage(d,0,0),m.getImageData(0,0,d.width,d.height)):this.f.Ka.createImageData(b||this.f.canvas.width,c||this.f.canvas.height)}});
a.gf=function(){function a(b,c){e["EaseIn"+b]=c;e["EaseOut"+b]=function(a){return 1-c(1-a)};e["EaseInOut"+b]=function(a){return.5>a?c(2*a)/2:c(-2*a+2)/-2+1}}var b={},c,e={};["Quad","Cubic","Quart","Quint","Expo"].forEach(function(a,c){b[a]=function(a){return Math.pow(a,c+2)}});b.wf=function(a){return 1-Math.cos(a*Math.PI/2)};b.ef=function(a){return 1-Math.sqrt(1-a*a)};b.hf=function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)};b.bf=function(a){return a*a*(3*a-
2)};b.df=function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)};for(c in b)a(c,b[c]);e.of=function(a){return a};e.xf=function(a){return-Math.cos(a*Math.PI)/2+.5};return e}();a.action=d(a.cc);a.clip=d(a.u);a.L=d(a.Image);a.Ua=d(a.gb);a.vb=d(a.rd);a.text=d(a.Text);a.f=d(a.hb);a.ue=function(){var b=new a.Text("Drag Left/Right/Down to move.\n\nDrag Up to Rotate.\n\nFlick Down to Hard Drop.");b.t=a.Y.od;return b};a.se=function(){return new a.gc(void 0,
void 0,void 0,void 0,void 0,void 0)};a.ya=d(a.Ea);a.If=d(a.hd);a.map=d(a.ia);a.Mc=d(a.jd);a.de=d(a.fc)})(this,this.v);
(function(c,a){a.md=a.i.extend({gd:{IMG:"load",AUDIO:"canplaythrough",SCRIPT:"load"},aa:null,be:250,Wb:0,start:null,length:0,Uc:null,tb:null,Tb:null,d:function(b){a.i.apply(this,[b]);this.aa={};this.start=new Date},kc:function(){var a,e=0,d=0,f=this;for(a in this.aa)d++,this.aa.hasOwnProperty(a)&&this.aa[a].ready&&e++;this.Wb=e?e/d:0;this.Uc&&this.Uc(this.Wb);d===e?this.Tb&&this.Tb():this.Ud=c.setTimeout(function(){f.kc()},this.be)},Q:function(b,e){var d=this,f=this.aa[e],g;f?f=f.Q:(f=a.q(b),this.aa[e]=
g={Q:f},f.addEventListener(this.gd[b],function(){g.ready=!0;d.tb&&d.tb(g)},!1),f.addEventListener("error",function(){g.ready=!0;c.console.warn("Could not load asset: "+e)},!1),f.setAttribute("src",e),this.length++);return f},sa:function(a){return this.Q("IMG",a)},audio:function(b){var c=b.split(".").pop();a.Wa.audio[c]||(b=b.replace(new RegExp("\\."+c+"$"),"."+a.Wa.audio.De));return this.Q("AUDIO",b)},data:function(a,e){var d=this,f=new c.XMLHttpRequest,g=this.aa[a];g||(g=this.aa[a]={source:a,Pf:f},
f.onreadystatechange=function(){4===f.readyState&&(g.ready=!0,g.Fe=f.responseText,e&&e(g),d.tb&&d.tb(f))},f.open("GET",a),f.send());return g},oe:function(a){return this.data(a,function(a){a.oe=JSON.parse(a.Fe)})},Sf:function(a){a=this.Q("SCRIPT",a);c.document.head.appendChild(a);return a},ready:function(a){a&&(this.Tb=a);this.kc()},qa:function(){c.clearTimeout(this.Ud)}});a.re=a.da(a.md)})(this,this.v);
(function(c){c.eb=c.i.extend({cd:null,dc:null,Qb:0,Rb:0,Ub:0,length:0,Ya:0,Za:0,0:null,1:null,2:null,3:null,4:null,5:null,6:null,Xc:null});c.eb.Ba=c.eb.extend({Xc:function(a,b){var c=a.c+b.c,d=a.x+a.c+a.b,f=a.y+a.c+a.a,g=d-b.c-b.b-b.x,k=f-b.c-b.a-b.y,m=g*g+k*k;if(this.pa=c*c>m)return m=Math.sqrt(m),this.cd=a,this.dc=b,this.Qb=g/m,this.Rb=k/m,this.Ub=c-m,this[0]=d-g/2,this[1]=f-k/2,!0}});c.eb.bc=c.eb.extend({Xc:function(a,b){var c=a.x+a.b,d=b.x+b.b,f=a.y+a.a,g=b.y+b.a,k=c+a.width,m=d+b.width,r=f+a.height,
l=g+b.height,p,q;if(this.pa=!(d>=k||m<=c||g>=r||l<=f))return this.dc=b,p=this.Ya=m/2-k/2,q=this.Za=l/2-r/2,this[0]=Math.max(c,d),this[1]=Math.max(f,g),this[2]=Math.min(k,m),this[3]=Math.min(r,l),this[2]-this[0]<this[3]-this[1]?(this.Qb=0>p?-1:1,this.Rb=0,this.Ub=0>p?this[2]-c:k-this[0]):(this.Rb=0>q?-1:1,this.Qb=0,this.Ub=0>q?this[3]-f:r-this[1]),this}});c.ec={Ba:function(a){var b=this.c+a.c,c=this.x+this.c+this.b-a.c-a.b-a.x;a=this.y+this.c+this.a-a.c-a.a-a.y;return b*b>c*c+a*a},bc:function(a){var b=
this.y+this.height,c=a.x+a.width,d=a.y+a.height;return!(a.x>this.x+this.width||c<this.x||a.y>b||d<this.y)},Ca:function(a){var b=this.frame,c=b,d=!1;for(a={x:a.x-this.x,y:a.y-this.y,width:a.width,height:a.height};(c=c.G)!==b&&!(d=c.pa&&c.pa(a)););return d}};c.h.prototype.pa=c.ec.bc;c.u.prototype.pa=c.ec.Ca})(this.v);
(function(c,a){c.N=c.h.extend({shape:null,red:a,green:a,blue:a,Fc:"fill",Cb:a,pc:a,jc:a,Oa:null,d:function(a){c.h.apply(this,[a])},yb:c.h.prototype.P,P:function(a){if(this.red!==this.Cb||this.blue!==this.jc||this.green!==this.pc)this[this.Fc]="rgb("+Math.floor(this.red)+","+Math.floor(this.green)+","+Math.floor(this.blue)+")",this.Cb=this.Cb,this.pc=this.green,this.jc=this.blue;this.yb(a)},ub:function(){},t:function(a){a.beginPath();this.ub(a);a.closePath();a.fill();a.stroke()}});c.Ba=c.N.extend({shape:"circle",
c:0,d:function(a){"number"===typeof a&&(a={c:a});c.N.apply(this,[a])},ub:function(a){a.arc(this.c+this.b,this.c+this.a,this.c,0,2*Math.PI,!1)},Ia:c.Da.Ba});c.kd=c.N.extend({Ze:0,$e:0,ub:function(a){a.moveTo(this.b,this.a);a.lineTo(this.Ze,this.$e)}});c.fb=c.N.extend({shape:"polygon",U:null,Pb:null,d:function(a){c.N.apply(this,[a]);null===this.U&&(this.U=[]);null===this.Pb&&this.$d()},normalize:function(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]);a[0]/=c;a[1]/=c;return a},$d:function(){for(var a=0,c,d=
this.U,f=d.length,g=[],k=[0,0];a<f;a+=2)c=a+2<f?a+2:0,k[0]=d[c]-d[a],k[1]=d[c+1]-d[a+1],this.normalize(k),g.push(k[1],-k[0]);this.Pb=g},ub:function(a){var c=2,d=this.U,f=d.length;for(a.moveTo(d[0],d[1]);c<f;c+=2)a.lineTo(d[c],d[c+1])},Ia:c.Da.fb},{create:function(a,e){var d=2*Math.PI/a,f=d;for(e.U=[];a--;)e.U.push(Math.cos(f)*e.c,Math.sin(f)*e.c),f+=d;return new c.fb(e)}});c.Rect=c.N.extend({shape:"polygon",d:function(a){c.N.apply(this,[a]);null===this.width&&(this.height=this.width=2*this.c)},t:function(a){a.fillRect(this.b,
this.a,this.width,this.height);a.strokeRect(this.b,this.a,this.width,this.height)}});c.fd=c.N.extend({shape:"circle",Kb:"round",Lb:"round",Fc:"stroke",d:function(a){"number"===typeof a&&(a={Oa:a});c.N.apply(this,[a])},t:function(a){a.strokeRect(0,0,1,1)}});c.Of=c.da(c.fb);c.Cf=c.da(c.Ba);c.Nf=c.da(c.kd);c.Gf=c.da(c.fd);c.rect=c.da(c.Rect)})(this.v);
(function(c,a){var b=a.q("audio"),e=["wav","mp3","ogg"],d=["audio/wav","audio/mpeg","audio/ogg"];Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;return function(){return b.apply(a,arguments)}});c.HTMLAudioElement||(c.HTMLAudioElement=c.af);c.requestAnimationFrame||(c.requestAnimationFrame=c.mozRequestAnimationFrame||c.msRequestAnimationFrame||function(a){return c.setTimeout(a,1E3/60)});c.cancelAnimationFrame||(c.cancelAnimationFrame=c.mozCancelAnimationFrame||c.msCancelAnimationFrame||
function(a){c.clearTimeout(a)});a.Wa={audio:{},$b:"ontouchstart"in c.document};b&&b.canPlayType&&e.forEach(function(c,e){a.Wa.audio[c]=b.canPlayType(d[e]);a.Wa.audio[c]&&(a.Wa.audio.De=c)})})(this,this.v);(function(c,a){c.o=function(a){return new c.o.ld(a)};c.extend(c.o,{ka:{},ld:c.i.extend({x:0,y:0,Hc:0,Ic:0,V:1,W:1,I:null,element:null,interval:60,le:null,ra:null,pb:!1,disabled:!1,d:function(b){var e=this;if("string"===typeof b||"object"===typeof b&&b.tagName)b={element:b};c.i.call(this,b);null===this.element?this.element=a.document:"string"===typeof this.element&&(this.element=c.id(this.element));e.I={};e.ra={};e.Wc=function(){e.Rd()};e.Ja=function(a){e.Ad(a)};a.addEventListener("resize",this.Ja);
a.addEventListener("scroll",this.Ja);this.le=a.setInterval(this.Wc,this.interval);this.Ja();for(var d in c.o.ka)e.I[d]=new c.o.ka[d](e)},We:function(b){var c=this;c.disabled=!0;a.setTimeout(function(){c.disabled=!1},b)},rb:function(a,c){if("object"===typeof a)for(var d in a)this.rb(d,a[d]);else{if(!c)throw Error("callback parameter is required.");var f=this.ra[a];this.ra[a]=f?function(a){f(a);c(a)}:c}return this},H:function(a,c){if(!this.disabled&&(c.Mf=this,c.name=a,(!this.xe||!1!==this.xe(c))&&
this.ra[a]))return c.preventDefault(),this.ra[a](c)},Ad:function(){var b=this.element;b.getBoundingClientRect?(b=b.getBoundingClientRect(),this.Gb=a.scrollX+(b.left|0)||0,this.Hb=a.scrollY+(b.top|0)||0):(this.Gb=b.clientLeft||0,this.Hb=b.clientTop||0)},Rd:function(){if(!1===this.disabled)for(var a in this.I)this.I[a].update()},ad:function(a,c){a=a*this.V-this.Gb;c=c*this.W-this.Hb;this.Hc=a-this.x;this.Ic=c-this.y;this.x=a;this.y=c},qa:function(){this.disable();this.ra=null;a.removeEventListener("scroll",
this.Ja);a.removeEventListener("resize",this.Ja);a.clearInterval(this.Wc)},enable:function(){this.disabled=!1;for(var a in this.I)this.I[a].enable()},disable:function(){this.disabled=!0;for(var a in this.I)this.I[a].disable()}}),ja:c.i.extend({R:null,Q:null,enabled:!1,Ha:null,Ga:null,d:function(a){this.R={};this.e=a;this.Q=a.element;this.enable();a.pb&&this.qc()},qc:function(){this.pb=!0},update:function(){},ma:function(a,c){var d=c.bind(this);this.R[a]=d;this.Q.addEventListener(a,d)},na:function(a){this.Q.removeEventListener(a,
this.R[a])},enable:function(){this.enabled||(this.Ha(),this.enabled=!0);return this},disable:function(){this.enabled&&(this.Ga(),this.enabled=!1);return this},qa:function(){this.disable();for(var a in this.e.I)if(this.e.I[a]===this){delete this.e.I[a];break}}})})})(this.v,this);
(function(c){c.o.ka.qf=c.o.ja.extend({za:1,Aa:1,Gb:0,Hb:0,Cc:!0,Fa:function(a){this.e.ad(a.pageX,a.pageY)},lc:function(a){var b={0:"buttonY",1:"buttonX",2:"buttonA"}[a.button];this.Fa(a);this.e.H(b,a);this.e.H("button",a);return!1},qc:function(){this.Cc=!1},Qd:function(a){this.Cc&&(this.Fa(a),(Math.abs(this.e.Hc)>this.za||Math.abs(this.e.Ic)>this.Aa)&&this.e.H("move",a))},Ha:function(){this.ma("mousemove",this.Qd);this.ma("click",this.lc);this.ma("contextmenu",this.lc)},Ga:function(){this.na("mousemove");
this.na("click");this.na("contextmenu")}})})(this.v,this);
(function(c){c.o.ka.Touch=c.o.ja.extend({za:20,Aa:20,mb:70,ge:200,ze:null,Ae:null,touches:null,Ab:"linear",set Mb(a){this.Ab=a;this.ic="linear"===a?this.vd:this.wd},get Mb(){return this.Ab},c:25,Fb:0,ic:null,d:function(a){c.o.ja.call(this,a);this.Mb=this.Ab},Fa:function(a){this.e.ad(a.pageX,a.pageY)},Ib:function(a,b){for(var c=a.changedTouches,d=c.length,f;d--;)f=c[d].identifier,f=this.touches[f]||(this.touches[f]={id:f}),f.ca=a,f.$b=c[d],this.Fa(f.$b),b(f,this)},update:function(){if(!this.pb){var a=
this.touches,b,c;for(c in a)b=a[c],b.te||(this.Fa(b.$b),this.e.H("buttonY",b.ca))}},Gc:function(a){a.te=!0;this.e.H(a.direction,a.ca);this.pb||(a.ca.direction=a.direction,this.e.H("move",a.ca))},vd:function(a,b){var c=b.e.x,d=b.e.y,f=c-a.Nb,g=d-a.Ob,k;f<-b.za?(a.Nb=c,k="left"):f>b.za&&(a.Nb=c,k="right");g<-b.Aa?(a.Ob=d,k="up"+(k?"_"+k:"")):g>b.Aa&&(a.Ob=d,k="down"+(k?"_"+k:""));(a.direction=k)&&b.Gc(a)},wd:function(a,b){var c=b.e.x,d=b.e.y,f=a.Ya-c,g=a.Za-d,c=c-a.Be,d=d-a.Ce;(f>b.za||f<-b.za)&&(g>
b.Aa||g<-b.Aa)&&(a.ca.Fb=Math.atan2(d,c),b.e.H("move",a.ca))},Wd:function(a){this.Ib(a,this.ic)},Cd:function(a){var b=this.e.x-a.Ya,c=this.e.y-a.Za,d;b<-this.mb?d="buttonY":b>this.mb&&(d="buttonA");c<-this.mb?d="buttonX":c>this.mb&&(d="buttonB");d?this.e.H(d,a.ca):a.direction&&this.Gc(a)},Pe:function(a){a.Be=this.ze||a.Ya-Math.cos(this.Fb)*this.c;a.Ce=this.Ae||a.Za-Math.sin(this.Fb)*this.c},xd:function(a,b){a.start=Date.now();a.Ya=a.Nb=b.e.x;a.Za=a.Ob=b.e.y;"radial"===b.Mb&&b.Pe(a)},ud:function(a,
b){Date.now()-a.start<b.ge&&b.Cd(a);delete b.touches[a.id]},Xd:function(a){this.Ib(a,this.xd)},Vd:function(a){this.Ib(a,this.ud)},Ha:function(){this.ma("touchmove",this.Wd);this.ma("touchstart",this.Xd);this.ma("touchend",this.Vd);this.touches={}},Ga:function(){this.na("touchmove");this.na("touchstart");this.na("touchend")}})})(this.v,this);
(function(c,a){var b=a.document,e={32:"buttonB",13:"buttonY",16:"buttonX",17:"buttonA",37:"left",38:"up",39:"right",40:"down",105:"up_right",103:"up_left",99:"down_right",97:"down_left"};c.o.ka.nf=c.o.ja.extend({Na:null,keys:null,Md:function(a){this.keys[a.keyCode]=a;this.Na[a.keyCode]&&a.preventDefault()},d:function(a){this.keys={};c.o.ja.call(this,a);null===this.Na&&c.extend(this.Na={},e)},Nd:function(a){this.keys[a.keyCode]=!1},update:function(){var a,b,c;for(c in this.Na)if(b=this.keys[c])a=this.Na[c],
this.e.H(a,b),32<c&&(b.direction=a,this.e.H("move",b)),this.e.H("button",b)},Ha:function(){this.keys={};this.R.Oc=this.Md.bind(this);this.R.Pc=this.Nd.bind(this);b.addEventListener("keydown",this.R.Oc);b.addEventListener("keyup",this.R.Pc)},Ga:function(){this.keys={};b.removeEventListener("keydown",this.R.Oc);b.removeEventListener("keyup",this.R.Pc)}})})(this.v,this);(function(c,a){a.navigator.Yf&&(c.o.ka.mf=c.o.ja.extend({Ha:function(){},Ga:function(){}}))})(this.v,this);(function(c){c.ie={uf:{Ef:c.q.L("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPxJREFUeNqckzEKwjAUhlPB6hm8QUd1EbpVRHAS0eO0N3DuIVx0EaSoHbtoR2/gFVorGv/oSwnRIfHBlwba/Pnf63sO53zDGLuCNdgxs/DAAvQZBCL+iQfIwRL4gGl4IAQpKOlM7IgXUMpBS7nhDs4gARUIwAC0lW+eYCLVU24fwi1rkNqe2cfhvSr5FRa3V7JOapGOFgKZPNf4smQWidyoAq6FQPVLYGQhENQ7ysWnwphGQYWvHcxA08KBaKi5mkLwRx8MxSJaeYznVqtHCTL6My7Vp6e5vIGuyD+mvEpq6VDmp+HToOU0eCIih8b5BFbgYmhfuJ6CzkuAAQBw8IUZ2uqgnAAAAABJRU5ErkJggg=="),
Uf:c.q.L("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAO5JREFUeNpi/P//PwMeEA3EL4B4Ly4FjAQM2APEH4E4GKcKkAE4sD0Q/wXi30BshEsdEx7b04AYJM8CxDmkukANiL/+R4DPQKyCTS0oDJKA5kgBsTgSlodiZPAIiB8C8WsgfgnEr4D4KcgUbyB+/Z908AKInWBOMQXiOyRovgXE+uAYRPKPIhCfIULzKSCWg+lDDxRhIL6LR/NDIBbEF42fgVgIT9SKgiIOWQDdAEsgFsBjACcQW+AzwADNNZ1A3AjE75DEDfElpPnQ5Lscmphg4rJAPAeIfwHxKmQ96AYsBGJnPPkDFN0LkMUAAgwAJMvR40MRRPUAAAAASUVORK5CYII=")},tf:{ff:function(){}},
cf:{kf:function(){}},Text:{rf:function(a){var b=this.stroke||this.fill||a.fillStyle,c=this.Oa||a.lineWidth;a.strokeStyle=b;a.globalAlpha=.2;a.lineWidth=c+10;a.strokeText(this.text,this.b,this.a);a.globalAlpha=.4;a.lineWidth=c+5;a.strokeText(this.text,this.b,this.a);a.globalAlpha=1;a.lineWidth=c;a.strokeText(this.text,this.b,this.a);a.globalCompositeOperation="lighter";a.fillStyle=b;a.fillText(this.text,this.b,this.a)},pf:function(a){this.Bb(a);a.scale(1,-1);var b=this.a;this.a-=2*this.ta;this.Ma||
(this.Ma=a.createLinearGradient(-this.b,this.a,-this.b,this.a+this.ta),this.Ma.addColorStop(1,this.fill||a.fillStyle),this.Ma.addColorStop(0,"transparent"));a.fillStyle=this.Ma;this.Bb(a);this.a=b}},bb:{ee:function(a){return new c.Ea({target:a,duration:30,ba:!0,Z:{alpha:0},F:{alpha:1}})},fe:function(a){return new c.Ea({target:a,ba:!0,duration:30,F:{alpha:0}})},expand:function(a,b){b=b||1.5;return new c.Ea({target:a,ba:!0,duration:30,F:{V:a.V+b,W:a.W+b}})},Xb:function(a){a=new c.Ea({target:a,c:3,duration:10,
ba:!0,F:{x:a.x,y:a.y}});a.yc=function(a,e){return 1===e?this.F[a]:this.Z[a]-this.c+c.Ee(2*this.c)};return a}}}})(this.v);(function(c,a){a.nb=a.nb||{};a.nb.hc=function(a){this.f=a;this.Ld();this.align()};a.nb.hc.prototype={Ld:function(){this.ob=a.q("DIV");this.ob.className="j5g3-stage-full";this.f.C.parentNode.appendChild(this.ob);this.ob.appendChild(this.f.C);c.addEventListener("resize",this.align.bind(this))},align:function(){var a=this.f.canvas,c=this.f.C,d=this.ob,f=d.clientHeight,d=d.clientWidth,a=a.width/a.height,g=f*a,k=f;g>d&&(g=d,k=d/a);c.style.width=(g|0)+"px";c.style.height=(k|9)+"px";c.style.top=Math.floor((f-
k)/2)+"px";c.style.left=Math.floor((d-g)/2)+"px"}}})(this,this.v);var h=window.v,n=h.re(),s=h.ie,w=n.sa("resources/background.jpg"),x=n.sa("resources/blocks-ss.png"),y=n.sa("resources/logo.png"),z=n.sa("resources/play.png"),A=n.sa("resources/score.png"),B=n.sa("resources/gameover.png"),C={pop:n.audio("resources/pop.ogg"),slide:n.audio("resources/slide.ogg"),rotate:n.audio("resources/rotate.ogg"),line:n.audio("resources/line.ogg"),gameover:n.audio("resources/gameover.mp3")},E=h.ia.extend({td:[3,4,3,2,3,3,3],X:48,xa:48,Zc:1,oa:0,Ed:function(c,a){switch(c){case 0:return[[[a],
[a],[a,a]],[[a,a,a],[a]],[[0,a,a],[0,0,a],[0,0,a]],[[],[0,0,a],[a,a,a]]];case 1:return[[[0,a],[0,a],[0,a],[0,a]],[[],[a,a,a,a],[],[]],[[0,0,a],[0,0,a],[0,0,a],[0,0,a]],[[],[],[a,a,a,a],[]]];case 2:return[[[a],[a,a],[a]],[[a,a,a],[0,a],[]],[[0,0,a],[0,a,a],[0,0,a]],[[],[0,a],[a,a,a]]];case 3:return[[[a,a],[a,a]],[[a,a],[a,a]],[[a,a],[a,a]],[[a,a],[a,a]]];case 4:return[[[0,a],[0,a],[a,a]],[[a],[a,a,a],[]],[[0,a,a],[0,a],[0,a]],[[],[a,a,a],[0,0,a]]];case 5:return[[[0,a],[a,a],[a]],[[a,a],[0,a,a],[]],
[[0,0,a],[0,a,a],[0,a]],[[],[a,a],[0,a,a]]];case 6:return[[[a],[a,a],[0,a]],[[0,a,a],[a,a],[]],[[0,a],[0,a,a],[0,0,a]],[[],[0,a,a],[a,a]]]}},Fd:function(){var c=h.Nc(7),a=this.Ed(c,1+h.Nc(9));return{map:a,cols:this.td[c],rows:a[0].length,rotation:0}},d:function(){h.ia.apply(this);this.ga=D.vb.ga();this.g=this.Fd();this.size(48*this.g.cols,48*this.g.rows);this.b=-this.width/2;this.a=-this.height/2;this.map=this.g.map[0];this.Bc()},Jc:function(c){for(var a=this.g.map[this.g.rotation],b=a.length,e;b--;)for(e=
0;e<a[b].length;e++)if(a[b][e]&&c(a[b][e],this.Zc+b,this.oa+e,this))return},ya:function(c,a){var b=this,e={},d={};if(!b.Pa)return b.Dc(),b.Pa=!0,e[c]=b[c],d[c]=a,b.parent.add(h.ya({target:b,ba:!0,duration:3,Z:e,F:d,sb:function(){b.Pa=!1;b.Bc()}}))},La:function(c){this.y+=c;this.Zc=Math.floor((this.a+this.y)/48)+1},rotate:function(c,a){var b=c||1,e=this.g.rotation+=b;4===e?this.g.rotation=0:-1===e&&(this.g.rotation=3);a&&a(0,0)?(D.Ta("rotate"),this.ya("rotation",this.rotation+Math.PI/2*c)):this.g.rotation-=
b},Oe:function(c){this.x=48*c-this.b;this.oa=c+1},left:function(c){c?this.x-=48:this.ya("x",this.x-48);this.oa-=1},right:function(c){c?this.x+=48:this.ya("x",this.x+48);this.oa+=1}}),F=h.u.extend({x:20,y:140,width:480,height:864,$:function(){this.stretch(D.f.width-2*this.x,D.f.height-this.y-this.x);this.reset()},Xb:function(){D.f.add(s.bb.Xb(D.f))},ne:function(c){for(var a=c.length;a--;)if(!c[a])return!1;return!0},$a:function(c,a){var b=this.map,e=!0;this.g.Jc(function(d,f,g){if(b[f+a][g+c])return e=
!1});return e},reduce:function(){for(var c=this.map,a=c.length-1,b=0;a--;)this.ne(c[a])&&(this.Ge(c[a],a++),b++);b&&this.ye(b)},Ie:function(c){var a=s.bb.expand(c);a.F.x=c.x-c.width/2;a.F.y=c.y-c.height/2;a.sb=function(){c.remove()};this.add([a,s.bb.fe(c)])},Ge:function(c,a){var b=1,e=this.map;for(D.Ta("line");b<c.length-1;b++)this.Ie(c[b]);for(;1<a;a--)for(b=1;10>=b;b++)e[a][b]=e[a-1][b],e[a][b].y+=48;e[0]=[10,0,0,0,0,0,0,0,0,0,0,10]},ve:function(){var c=this,a=this.map,b;D.Ta("pop");this.g.Jc(function(e,
d,f){a[d][f]=b=D.vb.Ua(e+10);c.add(b.M(48*(f-1),48*(d-1)))});this.g.remove();this.reduce()},reset:function(){var c=19;for(this.map=[];c--;)this.map.push([10,0,0,0,0,0,0,0,0,0,0,10]);this.map.push([10,10,10,10,10,10,10,10,10,10,10,10])},Yd:function(c){c.Oe(4);c.y=-c.a-48;this.add(this.g=c)}}),G=h.u.extend({fill:"#eee",font:"34px sans-serif",x:240,y:20,width:150,height:60,$:function(){this.Sa=h.text({text:"0",x:110,y:0});this.T=h.text({text:"1",x:110,y:48});this.add([h.L(A).M(0,10),this.Sa,this.T])},
U:function(c){this.Sa.text=parseInt(this.Sa.text,10)+c;this.S()}}),H=h.u.extend({x:96,y:150,Sb:function(){this.remove();this.ua.qa();D.Ve()},$:function(){var c=h.L(y).M(0,-200),a=h.L(z).M(100,200).set({alpha:0});tween=h.ya({target:c,F:{y:0},ba:!0,duration:20});tween2=s.bb.ee(a);this.add([c,a,tween,tween2]);D.background.add(h.L(w));D.background.S();this.ua=h.o(D.f.canvas).rb("button",this.Sb.bind(this))}}),I=h.u.extend({y:200,x:120,font:"bold 45px sans-serif",fill:"#eee",stroke:"#000",Sb:function(){this.remove();
this.ua.qa();D.f.add(new H)},$:function(){var c=h.text("Restart").M(120,300);c.t=h.Y.sd;this.add([h.L(B),c]);c.Zd("center");this.ua=h.o(D.f.canvas).rb("button",this.Sb.bind(this))}});h.u.extend({$:function(){this.add([h.text("CONTROLS"),h.ue()])}});
var J=h.u.extend({speed:1.5,T:0,wa:null,qb:null,left:function(c){!this.g.Pa&&this.n.$a(-1,1)&&this.g.left("touchmove"===c.type)},right:function(c){!this.g.Pa&&this.n.$a(1,1)&&this.g.right("touchmove"===c.type)},click:function(){this.g.Pa||this.g.rotate(1,this.n.$a.bind(this.n))},me:function(){for(var c=1,a=this.n.map[0];10>=c;c++)if(a[c])return!0},je:function(){this.remove();this.Ac.remove();this.wa.remove();this.qb.remove();this.ua.qa();D.Ta("gameover");D.background.S();D.f.add(new I)},Jb:function(){this.g.La(this.speed);
!1===this.n.$a(0,1)&&(this.n.ve(),this.Kc())},La:function(){this.g.La(24);this.Jb()},Re:function(){for(D.Ta("slide");this.n.$a(0,1);)this.g.La(24);this.n.Xb();this.Jb();this.ua.We(300)},ac:function(){this.Jb();this.me()&&this.je()},Sa:function(c){this.T+=c;this.wa.U({1:100,2:250,3:400,4:800}[c]);10<this.T&&(this.speed+=.2,this.T-=10,this.wa.T.text=parseInt(this.wa.T.text,10)+1)},$:function(){this.n=new F;this.Ac=h.rect({x:this.n.x,y:this.n.y,V:this.n.V,W:this.n.W,width:this.n.width,height:this.n.height,
fill:"#000",alpha:.5});this.wa=new G;this.qb=h.clip({x:50,y:30,V:.4,W:.4,width:100,height:100});D.background.add([this.wa,this.qb,this.Ac]).S();this.fa=new E;this.add([this.n]).Kc();this.ua=h.o(D.f.canvas).rb({up:this.click.bind(this),left:this.left.bind(this),right:this.right.bind(this),down:this.La.bind(this),buttonB:this.Re.bind(this)});this.n.ye=this.Sa.bind(this)},Kc:function(){this.g=this.fa.remove();this.n.Yd(this.fa);this.fa=new E;this.fa.M(-this.fa.b,-this.fa.a);this.qb.add(this.fa).S()}}),
D=h.de({Va:{width:480,height:800,C:!0},Qc:h.clip().add([h.text({fill:"#eee",font:"30px sans-serif",x:10,y:40,update:function(){this.text="Loading: "+(100*n.Wb|0)+"%"}})]),Ta:function(c){C[c].currentTime=0;C[c].play()},Ve:function(){this.f.add(new J)},Ue:function(){this.vb=h.vb(x).ke(10,2);this.f.add(new H);this.Qc.remove()},Yb:function(){new h.nb.hc(this.f);this.background=this.f.pe({background:!0});this.f.add(this.Qc);this.$c();n.ready(this.Ue.bind(this))}});
